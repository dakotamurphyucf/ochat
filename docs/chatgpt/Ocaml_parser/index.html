<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Ocaml_parser (chatgpt.Ocaml_parser)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../odoc.support/odoc.css"/><meta name="generator" content="odoc 2.4.2"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script><script>let base_url = '../../';
let search_urls = ['../db.js','../../sherlodoc.js'];
</script><script src="../../odoc.support/odoc_search.js" defer="defer"></script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../index.html">chatgpt</a> &#x00BB; Ocaml_parser</nav><div class="odoc-search"><div class="search-inner"><input class="search-bar" placeholder="ðŸ”Ž Search..."/><div class="search-snake"></div><div class="search-result"></div></div></div><header class="odoc-preamble"><h1>Module <code><span>Ocaml_parser</span></code></h1><p>The <code>file_type</code> and <code>file_info</code> types are used to represent OCaml source files, and the <code>module_info</code> type represents the metadata of an OCaml module. The <code>collect_ocaml_files</code> function is used to collect OCaml source files from a directory and its subdirectories.</p></header><div class="odoc-content"><div class="odoc-spec"><div class="spec type anchored" id="type-ocaml_source"><a href="#type-ocaml_source" class="anchor"></a><code><span><span class="keyword">type</span> ocaml_source</span><span> = </span></code><ol><li id="type-ocaml_source.Interface" class="def variant constructor anchored"><a href="#type-ocaml_source.Interface" class="anchor"></a><code><span>| </span><span><span class="constructor">Interface</span></span></code></li><li id="type-ocaml_source.Implementation" class="def variant constructor anchored"><a href="#type-ocaml_source.Implementation" class="anchor"></a><code><span>| </span><span><span class="constructor">Implementation</span></span></code></li></ol></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-parse_result"><a href="#type-parse_result" class="anchor"></a><code><span><span class="keyword">type</span> parse_result</span><span> = </span><span>{</span></code><ol><li id="type-parse_result.location" class="def record field anchored"><a href="#type-parse_result.location" class="anchor"></a><code><span>location : string;</span></code></li><li id="type-parse_result.module_path" class="def record field anchored"><a href="#type-parse_result.module_path" class="anchor"></a><code><span>module_path : string;</span></code></li><li id="type-parse_result.comments" class="def record field anchored"><a href="#type-parse_result.comments" class="anchor"></a><code><span>comments : <span>string list</span>;</span></code></li><li id="type-parse_result.contents" class="def record field anchored"><a href="#type-parse_result.contents" class="anchor"></a><code><span>contents : string;</span></code></li><li id="type-parse_result.ocaml_source" class="def record field anchored"><a href="#type-parse_result.ocaml_source" class="anchor"></a><code><span>ocaml_source : <a href="#type-ocaml_source">ocaml_source</a>;</span></code></li></ol><code><span>}</span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-traverse_input"><a href="#type-traverse_input" class="anchor"></a><code><span><span class="keyword">type</span> traverse_input</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-traverse"><a href="#val-traverse" class="anchor"></a><code><span><span class="keyword">val</span> traverse : <span><a href="#type-traverse_input">traverse_input</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-parse_result">parse_result</a> list</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-parse"><a href="#val-parse" class="anchor"></a><code><span><span class="keyword">val</span> parse : 
  <span><span><span class="xref-unresolved">Eio</span>.Fs.dir_ty <span class="xref-unresolved">Eio</span>.Path.t</span> <span class="arrow">&#45;&gt;</span></span>
  <span>string <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-ocaml_source">ocaml_source</a> <span class="arrow">&#45;&gt;</span></span>
  <span>string <span class="arrow">&#45;&gt;</span></span>
  <a href="#type-traverse_input">traverse_input</a></span></code></div><div class="spec-doc"><p><code>parse dir file ocaml_source module_name</code> parses the given <code>file</code> with the specified <code>ocaml_source</code> (either <code>Interface</code> or <code>Implementation</code>) and module name <code>module_name</code>. It returns a list of <code>parse_result</code> records containing the location, module path, comments, contents, and file type for each parsed item.</p><ul class="at-tags"><li class="parameter"><span class="at-tag">parameter</span> <span class="value">dir</span> <p>is the directory in which the function is executed.</p></li></ul><ul class="at-tags"><li class="parameter"><span class="at-tag">parameter</span> <span class="value">file</span> <p>The file to be parsed.</p></li></ul><ul class="at-tags"><li class="parameter"><span class="at-tag">parameter</span> <span class="value">ocaml_source</span> <p>The type of the file, either <code>Interface</code> or <code>Implementation</code>.</p></li></ul><ul class="at-tags"><li class="parameter"><span class="at-tag">parameter</span> <span class="value">module_name</span> <p>The name of the module being parsed.</p></li></ul><ul class="at-tags"><li class="returns"><span class="at-tag">returns</span> <p>A list of <code>parse_result</code> records containing information about the parsed items.</p></li></ul></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-file_type"><a href="#type-file_type" class="anchor"></a><code><span><span class="keyword">type</span> <span>_ file_type</span></span><span> = </span></code><ol><li id="type-file_type.Mli" class="def variant constructor anchored"><a href="#type-file_type.Mli" class="anchor"></a><code><span>| </span><span><span class="constructor">Mli</span> : <span><a href="#type-mli">mli</a> <a href="#type-file_type">file_type</a></span></span></code></li><li id="type-file_type.Ml" class="def variant constructor anchored"><a href="#type-file_type.Ml" class="anchor"></a><code><span>| </span><span><span class="constructor">Ml</span> : <span><a href="#type-ml">ml</a> <a href="#type-file_type">file_type</a></span></span></code></li></ol></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-mli"><a href="#type-mli" class="anchor"></a><code><span><span class="keyword">and</span> mli</span><span> = </span></code><ol><li id="type-mli.MLI" class="def variant constructor anchored"><a href="#type-mli.MLI" class="anchor"></a><code><span>| </span><span><span class="constructor">MLI</span></span></code></li></ol></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-ml"><a href="#type-ml" class="anchor"></a><code><span><span class="keyword">and</span> ml</span><span> = </span></code><ol><li id="type-ml.ML" class="def variant constructor anchored"><a href="#type-ml.ML" class="anchor"></a><code><span>| </span><span><span class="constructor">ML</span></span></code></li></ol></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-file_info"><a href="#type-file_info" class="anchor"></a><code><span><span class="keyword">type</span> <span>'a file_info</span></span><span> = </span><span>{</span></code><ol><li id="type-file_info.file_type" class="def record field anchored"><a href="#type-file_info.file_type" class="anchor"></a><code><span>file_type : <span><span class="type-var">'a</span> <a href="#type-file_type">file_type</a></span>;</span></code></li><li id="type-file_info.file_name" class="def record field anchored"><a href="#type-file_info.file_name" class="anchor"></a><code><span>file_name : string;</span></code></li></ol><code><span>}</span></code></div><div class="spec-doc"><p><code>file_info</code> is a record type that contains the file_type and file_name.</p><p>Now, the file_type is encoded in the type system, and you can create file_info values with specific file types:</p><pre class="language-ocaml"><code>let mli_file = mli file_info { file_type = Mli; file_name = &quot;example.mli&quot; }
let ml_file : ml file_info = { file_type = Ml; file_name = &quot;example.ml&quot; }</code></pre></div></div><p><code>module_info</code> is a record type representing the metadata of an OCaml module, combining the interface (mli) and implementation (ml) files.</p><div class="odoc-spec"><div class="spec type anchored" id="type-module_info"><a href="#type-module_info" class="anchor"></a><code><span><span class="keyword">type</span> module_info</span><span> = </span><span>{</span></code><ol><li id="type-module_info.mli_file" class="def record field anchored"><a href="#type-module_info.mli_file" class="anchor"></a><code><span>mli_file : <span><span><a href="#type-mli">mli</a> <a href="#type-file_info">file_info</a></span> option</span>;</span></code></li><li id="type-module_info.ml_file" class="def record field anchored"><a href="#type-module_info.ml_file" class="anchor"></a><code><span>ml_file : <span><span><a href="#type-ml">ml</a> <a href="#type-file_info">file_info</a></span> option</span>;</span></code></li><li id="type-module_info.module_path" class="def record field anchored"><a href="#type-module_info.module_path" class="anchor"></a><code><span>module_path : string;</span></code></li></ol><code><span>}</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-parse_module_info"><a href="#val-parse_module_info" class="anchor"></a><code><span><span class="keyword">val</span> parse_module_info : 
  <span><span><span class="xref-unresolved">Eio</span>.Fs.dir_ty <span class="xref-unresolved">Eio</span>.Path.t</span> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-module_info">module_info</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-traverse_input">traverse_input</a> option</span> * <span><a href="#type-traverse_input">traverse_input</a> option</span></span></code></div><div class="spec-doc"><p><code>parse_module_info module_info</code> parses the given <code>module_info</code>. It returns a list of <code>parse_result</code> records containing the location, module path, comments, contents, and file type for each parsed item.</p><ul class="at-tags"><li class="parameter"><span class="at-tag">parameter</span> <span class="value">module_info</span> <p>The module information to be parsed.</p></li></ul><ul class="at-tags"><li class="returns"><span class="at-tag">returns</span> <p>A pair of traverse_input option * traverse_input option thunks containing information about the parsed items.</p></li></ul></div></div><p><code>collect_ocaml_files dir path</code> recursively collects OCaml source files from the directory specified by <code>path</code> and its subdirectories.</p><ul class="at-tags"><li class="parameter"><span class="at-tag">parameter</span> <span class="value">dir</span> <p>is the root directory in which the function is executed.</p></li></ul><ul class="at-tags"><li class="parameter"><span class="at-tag">parameter</span> <span class="value">path</span> <p>is path containing the OCaml source files.</p></li></ul><ul class="at-tags"><li class="returns"><span class="at-tag">returns</span> <p>a <code>Result.t</code> containing a list of <code>module_info</code> records, each representing the metadata of an OCaml module, including the interface (mli) and implementation (ml) files and the module path, or an error message if there was an issue reading the directory.</p></li></ul><div class="odoc-spec"><div class="spec value anchored" id="val-collect_ocaml_files"><a href="#val-collect_ocaml_files" class="anchor"></a><code><span><span class="keyword">val</span> collect_ocaml_files : 
  <span><span><span class="xref-unresolved">Eio</span>.Fs.dir_ty <span class="xref-unresolved">Eio</span>.Path.t</span> <span class="arrow">&#45;&gt;</span></span>
  <span>string <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><a href="#type-module_info">module_info</a> list</span>, string)</span> <span class="xref-unresolved">Stdlib</span>.result</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-format_parse_result"><a href="#val-format_parse_result" class="anchor"></a><code><span><span class="keyword">val</span> format_parse_result : <span><a href="#type-parse_result">parse_result</a> <span class="arrow">&#45;&gt;</span></span> string * string</span></code></div><div class="spec-doc"><p><code>format_parse_result parse_result</code> formats the given <code>parse_result</code> into a string.</p><ul class="at-tags"><li class="parameter"><span class="at-tag">parameter</span> <span class="value">parse_result</span> <p>The parse result to be formatted.</p></li></ul><ul class="at-tags"><li class="returns"><span class="at-tag">returns</span> <p>A formatted string containing the parse result information.</p></li></ul></div></div></div></body></html>
