sequenceDiagram
    participant Crawler as Markdown_crawler
    participant Snippet as Markdown_snippet
    participant Embed as Embed_service
    participant OpenAI as "OpenAI Embeddings API"
    participant VecDB as Vector_db
    participant FS as "File-system"
    participant Catalog as Md_index_catalog

    Crawler->>Snippet: Traverse markdown tree\nemit files
    Snippet->>Embed: Emit slices (meta, text)
    loop Batching & rate-limit (rate_per_sec)
        Embed->>OpenAI: POST /v1/embeddings (input[])
        OpenAI-->>Embed: embedding vectors
    end
    Embed-->>VecDB: (id, len, vector)
    VecDB->>FS: Persist vectors.binio
    VecDB->>FS: Persist snippets/*.md
    VecDB->>Catalog: Update index entry (centroid, metadata)
