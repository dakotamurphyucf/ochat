<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Spec (docs.findlib-1.core.command.Command.Spec)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 3.0.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script><script>let base_url = '../../../../../../';
let search_urls = ['../../../../../db.js','../../../../../sherlodoc.js'];
</script><script src="../../../../../odoc.support/odoc_search.js" defer="defer"></script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../../../../../index.html">Index</a> &#x00BB; <a href="../../../../../index.html">docs</a> &#x00BB; <a href="../../../../index.html">findlib-1</a> &#x00BB; <a href="../../../index.html">core</a> &#x00BB; <a href="../../index.html">command</a> &#x00BB; <a href="../index.html">Command</a> &#x00BB; Spec</nav><div class="odoc-search"><div class="search-inner"><input class="search-bar" placeholder="ðŸ”Ž Type '/' to search..."/><div class="search-snake"></div><div class="search-result"></div></div></div><header class="odoc-preamble"><h1>Module <code><span>Command.Spec</span></code></h1><p>The old interface for command-line specifications -- <b>Do Not Use</b>.</p><p>This interface should not be used. See the <span class="xref-unresolved" title="Core.Command.Param"><code>Param</code></span> module for the new way to do things.</p></header><div class="odoc-tocs"><nav class="odoc-toc odoc-local-toc"><ul><li><a href="#command-parameters">Command parameters</a></li><li><a href="#command-specifications">Command specifications</a></li></ul></nav></div><div class="odoc-content"><h3 id="command-parameters"><a href="#command-parameters" class="anchor"></a>Command parameters</h3><div class="odoc-spec"><div class="spec type anchored" id="type-param"><a href="#type-param" class="anchor"></a><code><span><span class="keyword">type</span> <span>'a param</span></span><span> = <span><span class="type-var">'a</span> <a href="../Param/index.html#type-t">Param.t</a></span></span></code></div><div class="spec-doc"><p>Specification of an individual parameter to the command's main function.</p><ul class="at-tags"><li class="deprecated"><span class="at-tag">deprecated</span> [since 2019-03] use [Command.Param.t] instead</li></ul></div></div><div class="odoc-include"><details open="open"><summary class="spec include"><code><span><span class="keyword">include</span> <a href="../Param/module-type-S/index.html">Param.S</a> <span class="keyword">with</span> <span><span class="keyword">type</span> <span>'a <a href="../Param/module-type-S/index.html#type-t">t</a></span> := <span><span class="type-var">'a</span> <a href="../Param/index.html#type-t">Param.t</a></span></span></span></code></summary><div class="odoc-include"><div class="spec-doc"><p><code>Command.Param</code> is intended to be used with the <code>[%map_open]</code> syntax defined in <code>ppx_let</code>, like so:</p><pre class="language-ocaml"><code>  let command =
    Command.basic ~summary:&quot;...&quot;
      (let%map_open count = anon (&quot;COUNT&quot; %: int)
       and port = flag &quot;port&quot; (optional int) ~doc:&quot;N listen on this port&quot;
       and person = person_param
       in
       (* ... Command-line validation code, if any, goes here ... *)
       fun () -&gt;
         (* The body of the command *)
         do_stuff count port person)</code></pre><p>One can also use <code>[%map_open]</code> to define composite command line parameters, like <code>person_param</code> in the previous snippet:</p><pre class="language-ocaml"><code>  type person = { name : string; age : int }

  let person_param : person Command.Param.t =
    (let%map_open name =
       flag &quot;name&quot; (required string) ~doc:&quot;X name of the person&quot;
     and age = flag &quot;age&quot; (required int) ~doc:&quot;N how many years old&quot;
     in
     {name; age})</code></pre><p>The right-hand sides of <code>[%map_open]</code> definitions have <code>Command.Param</code> in scope.</p><p>See example/command/main.ml for more examples.</p></div><details open="open"><summary class="spec include"><code><span><span class="keyword">include</span> <a href="../../../../base/Base/Applicative/module-type-S/index.html">Base.Applicative.S</a> <span class="keyword">with</span> <span><span class="keyword">type</span> <span>'a <a href="../../../../base/Base/Applicative/module-type-S/index.html#type-t">t</a></span> := <span><span class="type-var">'a</span> <a href="../Param/index.html#type-t">Param.t</a></span></span></span></code></summary><div class="odoc-spec"><div class="spec value anchored" id="val-return"><a href="#val-return" class="anchor"></a><code><span><span class="keyword">val</span> return : <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="../Param/index.html#type-t">Param.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-map"><a href="#val-map" class="anchor"></a><code><span><span class="keyword">val</span> map : <span><span><span class="type-var">'a</span> <a href="../Param/index.html#type-t">Param.t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="label">f</span>:<span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'b</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> <a href="../Param/index.html#type-t">Param.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-both"><a href="#val-both" class="anchor"></a><code><span><span class="keyword">val</span> both : <span><span><span class="type-var">'a</span> <a href="../Param/index.html#type-t">Param.t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'b</span> <a href="../Param/index.html#type-t">Param.t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'a</span> * <span class="type-var">'b</span>)</span> <a href="../Param/index.html#type-t">Param.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-(&lt;*&gt;)"><a href="#val-(&lt;*&gt;)" class="anchor"></a><code><span><span class="keyword">val</span> (&lt;*&gt;) : <span><span><span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'b</span>)</span> <a href="../Param/index.html#type-t">Param.t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="../Param/index.html#type-t">Param.t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> <a href="../Param/index.html#type-t">Param.t</a></span></span></code></div><div class="spec-doc"><p>same as <code>apply</code></p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-(&lt;*)"><a href="#val-(&lt;*)" class="anchor"></a><code><span><span class="keyword">val</span> (&lt;*) : <span><span><span class="type-var">'a</span> <a href="../Param/index.html#type-t">Param.t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span>unit <a href="../Param/index.html#type-t">Param.t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="../Param/index.html#type-t">Param.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-(*&gt;)"><a href="#val-(*&gt;)" class="anchor"></a><code><span><span class="keyword">val</span> (*&gt;) : <span><span>unit <a href="../Param/index.html#type-t">Param.t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="../Param/index.html#type-t">Param.t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="../Param/index.html#type-t">Param.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-(&gt;&gt;|)"><a href="#val-(&gt;&gt;|)" class="anchor"></a><code><span><span class="keyword">val</span> (&gt;&gt;|) : <span><span><span class="type-var">'a</span> <a href="../Param/index.html#type-t">Param.t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'b</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> <a href="../Param/index.html#type-t">Param.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-apply"><a href="#val-apply" class="anchor"></a><code><span><span class="keyword">val</span> apply : <span><span><span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'b</span>)</span> <a href="../Param/index.html#type-t">Param.t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="../Param/index.html#type-t">Param.t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> <a href="../Param/index.html#type-t">Param.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-map2"><a href="#val-map2" class="anchor"></a><code><span><span class="keyword">val</span> map2 : <span><span><span class="type-var">'a</span> <a href="../Param/index.html#type-t">Param.t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'b</span> <a href="../Param/index.html#type-t">Param.t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="label">f</span>:<span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'c</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'c</span> <a href="../Param/index.html#type-t">Param.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-map3"><a href="#val-map3" class="anchor"></a><code><span><span class="keyword">val</span> map3 : 
  <span><span><span class="type-var">'a</span> <a href="../Param/index.html#type-t">Param.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'b</span> <a href="../Param/index.html#type-t">Param.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'c</span> <a href="../Param/index.html#type-t">Param.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">f</span>:<span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'c</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'d</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'d</span> <a href="../Param/index.html#type-t">Param.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-all"><a href="#val-all" class="anchor"></a><code><span><span class="keyword">val</span> all : <span><span><span><span class="type-var">'a</span> <a href="../Param/index.html#type-t">Param.t</a></span> list</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> list</span> <a href="../Param/index.html#type-t">Param.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-all_unit"><a href="#val-all_unit" class="anchor"></a><code><span><span class="keyword">val</span> all_unit : <span><span><span>unit <a href="../Param/index.html#type-t">Param.t</a></span> list</span> <span class="arrow">&#45;&gt;</span></span> <span>unit <a href="../Param/index.html#type-t">Param.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Applicative_infix"><a href="#module-Applicative_infix" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Applicative_infix/index.html">Applicative_infix</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div></details></div><h3 id="various-internal-values"><a href="#various-internal-values" class="anchor"></a>Various internal values</h3><div class="odoc-spec"><div class="spec value anchored" id="val-help"><a href="#val-help" class="anchor"></a><code><span><span class="keyword">val</span> help : <span><span><a href="../../../../base/Base/index.html#type-string">Base.string</a> <a href="../../../../base/Base/Lazy/index.html#type-t">Base.Lazy.t</a></span> <a href="../Param/index.html#type-t">Param.t</a></span></span></code></div><div class="spec-doc"><p>The help text for the command.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-path"><a href="#val-path" class="anchor"></a><code><span><span class="keyword">val</span> path : <span><span><a href="../../../../base/Base/index.html#type-string">Base.string</a> <a href="../../../../base/Base/index.html#type-list">Base.list</a></span> <a href="../Param/index.html#type-t">Param.t</a></span></span></code></div><div class="spec-doc"><p>The subcommand path of the command.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-args"><a href="#val-args" class="anchor"></a><code><span><span class="keyword">val</span> args : <span><span><a href="../../../../base/Base/index.html#type-string">Base.string</a> <a href="../../../../base/Base/index.html#type-list">Base.list</a></span> <a href="../Param/index.html#type-t">Param.t</a></span></span></code></div><div class="spec-doc"><p>The arguments passed to the command.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-flag"><a href="#val-flag" class="anchor"></a><code><span><span class="keyword">val</span> flag : 
  <span><span class="optlabel">?aliases</span>:<span><a href="../../../../base/Base/index.html#type-string">Base.string</a> <a href="../../../../base/Base/index.html#type-list">Base.list</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?full_flag_required</span>:<a href="../../../../base/Base/index.html#type-unit">Base.unit</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../../../base/Base/index.html#type-string">Base.string</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a</span> <a href="../Flag/index.html#type-t">Flag.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">doc</span>:<a href="../../../../base/Base/index.html#type-string">Base.string</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'a</span> <a href="../Param/index.html#type-t">Param.t</a></span></span></code></div><div class="spec-doc"><p><code>flag name spec ~doc</code> specifies a command that, among other things, takes a flag named <code>name</code> on its command line. <code>doc</code> indicates the meaning of the flag.</p><p>All flags must have a dash at the beginning of the name. If <code>name</code> is not prefixed by &quot;-&quot;, it will be normalized to <code>&quot;-&quot; ^ name</code>.</p><p>Unless <code>full_flag_required</code> is used, one doesn't have to pass <code>name</code> exactly on the command line, but only an unambiguous prefix of <code>name</code> (i.e., a prefix which is not a prefix of any other flag's name).</p><p>NOTE: the <code>doc</code> for a flag which takes an argument should be of the form <code>arg_name ^ &quot; &quot; ^ description</code> where <code>arg_name</code> describes the argument and <code>description</code> describes the meaning of the flag.</p><p>NOTE: flag names (including aliases) containing underscores will be rejected. Use dashes instead.</p><p>NOTE: &quot;-&quot; by itself is an invalid flag name and will be rejected.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-flag_optional_with_default_doc"><a href="#val-flag_optional_with_default_doc" class="anchor"></a><code><span><span class="keyword">val</span> flag_optional_with_default_doc : 
  <span><span class="optlabel">?aliases</span>:<span><a href="../../../../base/Base/index.html#type-string">Base.string</a> <a href="../../../../base/Base/index.html#type-list">Base.list</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?full_flag_required</span>:<a href="../../../../base/Base/index.html#type-unit">Base.unit</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../../../base/Base/index.html#type-string">Base.string</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a</span> <a href="../Arg_type/index.html#type-t">Arg_type.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <a href="../../../../base/Base/Sexp/index.html#type-t">Base.Sexp.t</a>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">default</span>:<span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">doc</span>:<a href="../../../../base/Base/index.html#type-string">Base.string</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'a</span> <a href="../Param/index.html#type-t">Param.t</a></span></span></code></div><div class="spec-doc"><p><code>flag_optional_with_default_doc name arg_type sexp_of_default ~default ~doc</code> is a shortcut for <code>flag</code>, where:</p><ol><li>The <code>Flag.t</code> is <code>optional_with_default default arg_type</code></li><li>The <code>doc</code> is passed through with an explanation of what the default value appended.</li></ol></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-anon"><a href="#val-anon" class="anchor"></a><code><span><span class="keyword">val</span> anon : <span><span><span class="type-var">'a</span> <a href="../Anons/index.html#type-t">Anons.t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="../Param/index.html#type-t">Param.t</a></span></span></code></div><div class="spec-doc"><p><code>anon spec</code> specifies a command that, among other things, takes the anonymous arguments specified by <code>spec</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-escape_anon"><a href="#val-escape_anon" class="anchor"></a><code><span><span class="keyword">val</span> escape_anon : <span><span class="label">final_anon</span>:<span><span class="type-var">'a</span> <a href="../Anons/index.html#type-t">Anons.t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'a</span> * <span><a href="../../../../base/Base/index.html#type-string">Base.string</a> <a href="../../../../base/Base/index.html#type-list">Base.list</a></span>)</span> <a href="../Param/index.html#type-t">Param.t</a></span></span></code></div><div class="spec-doc"><p><code>escape_anon ~final_anon</code> parses <code>anon</code> and then stops parsing. Remaining command line arguments are collected in the <code>string list</code>, even if they start with dashes.</p><p>See <code>escape</code> for the flag version of this behavior.</p><p>The final anon is required to indicate when to stop parsing.</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-If_nothing_chosen"><a href="#module-If_nothing_chosen" class="anchor"></a><code><span><span class="keyword">module</span> <a href="If_nothing_chosen/index.html">If_nothing_chosen</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-choose_one"><a href="#val-choose_one" class="anchor"></a><code><span><span class="keyword">val</span> choose_one : 
  <span><span><span><span><span class="type-var">'a</span> <a href="../../../../base/Base/index.html#type-option">Base.option</a></span> <a href="../Param/index.html#type-t">Param.t</a></span> <a href="../../../../base/Base/index.html#type-list">Base.list</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">if_nothing_chosen</span>:<span><span>(<span class="type-var">'a</span>, <span class="type-var">'b</span>)</span> <a href="If_nothing_chosen/index.html#type-t">If_nothing_chosen.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'b</span> <a href="../Param/index.html#type-t">Param.t</a></span></span></code></div><div class="spec-doc"><p><code>choose_one clauses ~if_nothing_chosen</code> expresses a sum type. It raises if more than one of <code>clauses</code> is <code>Some _</code>. When <code>if_nothing_chosen = Raise</code>, it also raises if none of <code>clauses</code> is <code>Some _</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-choose_one_non_optional"><a href="#val-choose_one_non_optional" class="anchor"></a><code><span><span class="keyword">val</span> choose_one_non_optional : 
  <span><span><span><span class="type-var">'a</span> <a href="../Param/index.html#type-t">Param.t</a></span> <a href="../../../../base/Base/index.html#type-list">Base.list</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">if_nothing_chosen</span>:<span><span>(<span class="type-var">'a</span>, <span class="type-var">'b</span>)</span> <a href="If_nothing_chosen/index.html#type-t">If_nothing_chosen.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'b</span> <a href="../Param/index.html#type-t">Param.t</a></span></span></code></div><div class="spec-doc"><p><code>choose_one_non_optional clauses ~if_nothing_chosen</code> expresses a sum type. It raises if more than one of the <code>clauses</code> has any flags given on the command-line, and returns the value parsed from the clause that's given.</p><p>When <code>if_nothing_chosen = Raise</code>, it also raises if none of the <code>clauses</code> are given.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-and_arg_names"><a href="#val-and_arg_names" class="anchor"></a><code><span><span class="keyword">val</span> and_arg_names : <span><span><span class="type-var">'a</span> <a href="../Param/index.html#type-t">Param.t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'a</span> * <span><a href="../../../../base/Base/index.html#type-string">Base.string</a> <a href="../../../../base/Base/index.html#type-list">Base.list</a></span>)</span> <a href="../Param/index.html#type-t">Param.t</a></span></span></code></div><div class="spec-doc"><p><code>and_arg_names t</code> returns both the value of <code>t</code> and the names of the arguments that went into <code>t</code>. Useful for errors that reference multiple params.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-and_arg_name"><a href="#val-and_arg_name" class="anchor"></a><code><span><span class="keyword">val</span> and_arg_name : <span><span><span class="type-var">'a</span> <a href="../Param/index.html#type-t">Param.t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'a</span> * <a href="../../../../base/Base/index.html#type-string">Base.string</a>)</span> <a href="../Param/index.html#type-t">Param.t</a></span></span></code></div><div class="spec-doc"><p>Like <code>and_arg_names</code>, but asserts that there is exactly one name.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-arg_names"><a href="#val-arg_names" class="anchor"></a><code><span><span class="keyword">val</span> arg_names : <span><span><span class="type-var">'a</span> <a href="../Param/index.html#type-t">Param.t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><a href="../../../../base/Base/index.html#type-string">Base.string</a> <a href="../../../../base/Base/index.html#type-list">Base.list</a></span></span></code></div></div></details></div><div class="odoc-spec"><div class="spec value anchored" id="val-const"><a href="#val-const" class="anchor"></a><code><span><span class="keyword">val</span> const : <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="../Param/index.html#type-t">Param.t</a></span></span></code></div><div class="spec-doc"><p>Superceded by <code>return</code>, preserved for backwards compatibility.</p><ul class="at-tags"><li class="deprecated"><span class="at-tag">deprecated</span> [since 2018-10] use [Command.Param.return] instead of [Command.Spec.const]</li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-pair"><a href="#val-pair" class="anchor"></a><code><span><span class="keyword">val</span> pair : <span><span><span class="type-var">'a</span> <a href="../Param/index.html#type-t">Param.t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'b</span> <a href="../Param/index.html#type-t">Param.t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'a</span> * <span class="type-var">'b</span>)</span> <a href="../Param/index.html#type-t">Param.t</a></span></span></code></div><div class="spec-doc"><p>Superceded by <code>both</code>, preserved for backwards compatibility.</p><ul class="at-tags"><li class="deprecated"><span class="at-tag">deprecated</span> [since 2018-10] use [Command.Param.both] instead of [Command.Spec.pair]</li></ul></div></div><h3 id="command-specifications"><a href="#command-specifications" class="anchor"></a>Command specifications</h3><div class="odoc-spec"><div class="spec type anchored" id="type-t"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> <span>(-'main_in, +'main_out) t</span></span></code></div><div class="spec-doc"><p>Composable command-line specifications.</p><p>Ultimately one forms a basic command by combining a spec of type <code>('main, unit -&gt; unit) t</code> with a main function of type <code>'main</code>; see the <code>basic</code> function below. Combinators in this library incrementally build up the type of main according to what command-line parameters it expects, so the resulting type of <code>main</code> is something like:</p><p><code>arg1 -&gt; ... -&gt; argN -&gt; unit -&gt; unit</code></p><p>It may help to think of <code>('a, 'b) t</code> as a function space <code>'a -&gt; 'b</code> embellished with information about:</p><ul><li>how to parse the command line</li><li>what the command does and how to call it</li><li>how to autocomplete a partial command line</li></ul><p>One can view a value of type <code>('main_in, 'main_out) t</code> as a function that transforms a main function from type <code>'main_in</code> to <code>'main_out</code>, typically by supplying some arguments. E.g., a value of type <code>Spec.t</code> might have type:</p><pre class="language-ocaml"><code>  (arg1 -&gt; ... -&gt; argN -&gt; 'r, 'r) Spec.t</code></pre><p>Such a value can transform a main function of type <code>arg1 -&gt; ... -&gt; argN -&gt; 'r</code> by supplying it argument values of type <code>arg1</code>, ..., <code>argn</code>, leaving a main function whose type is <code>'r</code>. In the end, <code>Command.basic</code> takes a completed spec where <code>'r = unit -&gt; unit</code>, and hence whose type looks like:</p><pre class="language-ocaml"><code>  (arg1 -&gt; ... -&gt; argN -&gt; unit -&gt; unit, unit -&gt; unit) Spec.t</code></pre><p>A value of this type can fully apply a main function of type <code>arg1 -&gt; ... -&gt; argN -&gt; unit -&gt; unit</code> to all its arguments.</p><p>The final unit argument allows the implementation to distinguish between the phases of (1) parsing the command line and (2) running the body of the command. Exceptions raised in phase (1) lead to a help message being displayed alongside the exception. Exceptions raised in phase (2) are displayed without any command line help.</p><p>The view of <code>('main_in, main_out) Spec.t</code> as a function from <code>'main_in</code> to <code>'main_out</code> is directly reflected by the <code>step</code> function, whose type is:</p><pre class="language-ocaml"><code>  val step : ('m1 -&gt; 'm2) -&gt; ('m1, 'm2) t</code></pre></div></div><p><code>spec1 ++ spec2 ++ ... ++ specN</code> composes <code>spec1</code> through <code>specN</code>.</p><p>For example, if <code>spec_a</code> and <code>spec_b</code> have types:</p><pre class="language-ocaml"><code>  spec_a: (a1 -&gt; ... -&gt; aN -&gt; 'ra, 'ra) Spec.t;
  spec_b: (b1 -&gt; ... -&gt; bM -&gt; 'rb, 'rb) Spec.t</code></pre><p>then <code>spec_a ++ spec_b</code> has the following type:</p><pre class="language-ocaml"><code>  (a1 -&gt; ... -&gt; aN -&gt; b1 -&gt; ... -&gt; bM -&gt; 'rb, 'rb) Spec.t</code></pre><p>So, <code>spec_a ++ spec_b</code> transforms a main function by first supplying <code>spec_a</code>'s arguments of type <code>a1</code>, ..., <code>aN</code>, and then supplying <code>spec_b</code>'s arguments of type <code>b1</code>, ..., <code>bm</code>.</p><p>One can understand <code>++</code> as function composition by thinking of the type of specs as concrete function types, representing the transformation of a main function:</p><pre class="language-ocaml"><code>  spec_a: \/ra. (a1 -&gt; ... -&gt; aN -&gt; 'ra) -&gt; 'ra;
  spec_b: \/rb. (b1 -&gt; ... -&gt; bM -&gt; 'rb) -&gt; 'rb</code></pre><p>Under this interpretation, the composition of <code>spec_a</code> and <code>spec_b</code> has type:</p><pre class="language-ocaml"><code>  spec_a ++ spec_b : \/rc. (a1 -&gt; ... -&gt; aN -&gt; b1 -&gt; ... -&gt; bM -&gt; 'rc) -&gt; 'rc</code></pre><p>And the implementation is just function composition:</p><pre class="language-ocaml"><code>  sa ++ sb = fun main -&gt; sb (sa main)</code></pre><div class="odoc-spec"><div class="spec value anchored" id="val-empty"><a href="#val-empty" class="anchor"></a><code><span><span class="keyword">val</span> empty : <span><span>(<span class="type-var">'m</span>, <span class="type-var">'m</span>)</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p>The empty command-line spec.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-(++)"><a href="#val-(++)" class="anchor"></a><code><span><span class="keyword">val</span> (++) : <span><span><span>(<span class="type-var">'m1</span>, <span class="type-var">'m2</span>)</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span>(<span class="type-var">'m2</span>, <span class="type-var">'m3</span>)</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'m1</span>, <span class="type-var">'m3</span>)</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p>Command-line spec composition.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-(+&gt;)"><a href="#val-(+&gt;)" class="anchor"></a><code><span><span class="keyword">val</span> (+&gt;) : <span><span><span>(<span class="type-var">'m1</span>, <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'m2</span>)</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="../Param/index.html#type-t">Param.t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'m1</span>, <span class="type-var">'m2</span>)</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p>Adds a rightmost parameter onto the type of main.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-(+&lt;)"><a href="#val-(+&lt;)" class="anchor"></a><code><span><span class="keyword">val</span> (+&lt;) : <span><span><span>(<span class="type-var">'m1</span>, <span class="type-var">'m2</span>)</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="../Param/index.html#type-t">Param.t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'m1</span>, <span class="type-var">'m2</span>)</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p>Adds a leftmost parameter onto the type of main.</p><p>This function should only be used as a workaround in situations where the order of composition is at odds with the order of anonymous arguments because you're factoring out some common spec.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-step"><a href="#val-step" class="anchor"></a><code><span><span class="keyword">val</span> step : <span><span>(<span><span class="type-var">'m1</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'m2</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'m1</span>, <span class="type-var">'m2</span>)</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p>Combinator for patching up how parameters are obtained or presented.</p><p>Here are a couple examples of some of its many uses:</p><ul><li><p><i>introducing labeled arguments</i></p><pre>step (fun m v -&gt; m ~foo:v)
       +&gt; flag &quot;-foo&quot; no_arg : (foo:bool -&gt; 'm, 'm) t</pre></li><li><p><i>prompting for missing values</i></p><pre>step (fun m user -&gt; match user with
         | Some user -&gt; m user
         | None -&gt; print_string &quot;enter username: &quot;; m (read_line ()))
       +&gt; flag &quot;-user&quot; (optional string) ~doc:&quot;USER to frobnicate&quot;
       : (string -&gt; 'm, 'm) t</pre></li></ul><p>A use of <code>step</code> might look something like:</p><pre class="language-ocaml"><code>  step (fun main -&gt; let ... in main x1 ... xN) : (arg1 -&gt; ... -&gt; argN -&gt; 'r, 'r) t</code></pre><p>Thus, <code>step</code> allows one to write arbitrary code to decide how to transform a main function. As a simple example:</p><pre class="language-ocaml"><code>  step (fun main -&gt; main 13.) : (float -&gt; 'r, 'r) t</code></pre><p>This spec is identical to <code>const 13.</code>; it transforms a main function by supplying it with a single float argument, <code>13.</code>. As another example:</p><pre class="language-ocaml"><code>  step (fun m v -&gt; m ~foo:v) : (foo:'foo -&gt; 'r, 'foo -&gt; 'r) t</code></pre><p>This spec transforms a main function that requires a labeled argument into a main function that requires the argument unlabeled, making it easily composable with other spec combinators.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-wrap"><a href="#val-wrap" class="anchor"></a><code><span><span class="keyword">val</span> wrap : 
  <span><span>(<span><span class="label">run</span>:<span>(<span><span class="type-var">'m1</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'r1</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="label">main</span>:<span class="type-var">'m2</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'r2</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'m1</span>, <span class="type-var">'r1</span>)</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'m2</span>, <span class="type-var">'r2</span>)</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p>Combinator for defining a class of commands with common behavior.</p><p>Here are two examples of command classes defined using <code>wrap</code>:</p><ul><li><p><i>print top-level exceptions to stderr</i></p><pre>wrap (fun ~run ~main -&gt;
         Exn.handle_uncaught ~exit:true (fun () -&gt; run main)
       ) : ('m, unit) t -&gt; ('m, unit) t</pre></li><li><p><i>iterate over lines from stdin</i></p><pre>wrap (fun ~run ~main -&gt;
         In_channel.iter_lines stdin ~f:(fun line -&gt; run (main line))
       ) : ('m, unit) t -&gt; (string -&gt; 'm, unit) t</pre></li></ul></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Arg_type"><a href="#module-Arg_type" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Arg_type/index.html">Arg_type</a></span><span> : <span class="keyword">module</span> <span class="keyword">type</span> <span class="keyword">of</span> <a href="../Arg_type/index.html">Arg_type</a> <span class="keyword">with</span> <span><span class="keyword">type</span> <span>'a <a href="../Arg_type/index.html#type-t">t</a></span> = <span><span class="type-var">'a</span> <a href="../Arg_type/index.html#type-t">Arg_type.t</a></span></span></span></code></div><div class="spec-doc"><p>Argument types.</p></div></div><div class="odoc-include"><details open="open"><summary class="spec include"><code><span><span class="keyword">include</span> <span class="keyword">module</span> <span class="keyword">type</span> <span class="keyword">of</span> <a href="Arg_type/Export/index.html">Arg_type.Export</a></span></code></summary><div class="odoc-spec"><div class="spec value anchored" id="val-string"><a href="#val-string" class="anchor"></a><code><span><span class="keyword">val</span> string : <span><a href="../../../../base/Base/index.html#type-string">Base.string</a> <a href="Arg_type/index.html#type-t">Arg_type.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-int"><a href="#val-int" class="anchor"></a><code><span><span class="keyword">val</span> int : <span><a href="../../../../base/Base/index.html#type-int">Base.int</a> <a href="Arg_type/index.html#type-t">Arg_type.t</a></span></span></code></div><div class="spec-doc"><p>Beware that an anonymous argument of type <code>int</code> cannot be specified as negative, as it is ambiguous whether -1 is a negative number or a flag. (The same applies to <code>float</code>, <code>time_span</code>, etc.) You can use the special built-in &quot;-anon&quot; flag to force a string starting with a hyphen to be interpreted as an anonymous argument rather than as a flag, or you can just make it a parameter to a flag to avoid the issue.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-char"><a href="#val-char" class="anchor"></a><code><span><span class="keyword">val</span> char : <span><a href="../../../../base/Base/index.html#type-char">Base.char</a> <a href="Arg_type/index.html#type-t">Arg_type.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-float"><a href="#val-float" class="anchor"></a><code><span><span class="keyword">val</span> float : <span><a href="../../../../base/Base/index.html#type-float">Base.float</a> <a href="Arg_type/index.html#type-t">Arg_type.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-bool"><a href="#val-bool" class="anchor"></a><code><span><span class="keyword">val</span> bool : <span><a href="../../../../base/Base/index.html#type-bool">Base.bool</a> <a href="Arg_type/index.html#type-t">Arg_type.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-sexp"><a href="#val-sexp" class="anchor"></a><code><span><span class="keyword">val</span> sexp : <span><a href="../../../../base/Base/Sexp/index.html#type-t">Base.Sexp.t</a> <a href="Arg_type/index.html#type-t">Arg_type.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-sexp_conv"><a href="#val-sexp_conv" class="anchor"></a><code><span><span class="keyword">val</span> sexp_conv : 
  <span><span class="optlabel">?complete</span>:<a href="../Auto_complete/index.html#type-t">Auto_complete.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><a href="../../../../base/Base/Sexp/index.html#type-t">Base.Sexp.t</a> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'a</span> <a href="Arg_type/index.html#type-t">Arg_type.t</a></span></span></code></div></div></details></div><div class="odoc-spec"><div class="spec type anchored" id="type-flag"><a href="#type-flag" class="anchor"></a><code><span><span class="keyword">type</span> <span>'a flag</span></span><span> = <span><span class="type-var">'a</span> <a href="../Flag/index.html#type-t">Flag.t</a></span></span></code></div><div class="spec-doc"><p>A flag specification.</p></div></div><div class="odoc-include"><details open="open"><summary class="spec include"><code><span><span class="keyword">include</span> <span class="keyword">module</span> <span class="keyword">type</span> <span class="keyword">of</span> <a href="../Flag/index.html">Flag</a> <span class="keyword">with</span> <span><span class="keyword">type</span> <span>'a <a href="../Flag/index.html#type-t">t</a></span> := <span><span class="type-var">'a</span> <a href="#type-flag">flag</a></span></span></span></code></summary><div class="odoc-spec"><div class="spec value anchored" id="val-required"><a href="#val-required" class="anchor"></a><code><span><span class="keyword">val</span> required : <span><span><span class="type-var">'a</span> <a href="../Arg_type/index.html#type-t">Arg_type.t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-flag">flag</a></span></span></code></div><div class="spec-doc"><p>Required flags must be passed exactly once.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-optional"><a href="#val-optional" class="anchor"></a><code><span><span class="keyword">val</span> optional : <span><span><span class="type-var">'a</span> <a href="../Arg_type/index.html#type-t">Arg_type.t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="../../../../base/Base/index.html#type-option">Base.option</a></span> <a href="#type-flag">flag</a></span></span></code></div><div class="spec-doc"><p>Optional flags may be passed at most once.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-optional_with_default"><a href="#val-optional_with_default" class="anchor"></a><code><span><span class="keyword">val</span> optional_with_default : <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="../Arg_type/index.html#type-t">Arg_type.t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-flag">flag</a></span></span></code></div><div class="spec-doc"><p><code>optional_with_default</code> flags may be passed at most once, and default to a given value.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-listed"><a href="#val-listed" class="anchor"></a><code><span><span class="keyword">val</span> listed : <span><span><span class="type-var">'a</span> <a href="../Arg_type/index.html#type-t">Arg_type.t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="../../../../base/Base/index.html#type-list">Base.list</a></span> <a href="#type-flag">flag</a></span></span></code></div><div class="spec-doc"><p><code>listed</code> flags may be passed zero or more times.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-one_or_more_as_pair"><a href="#val-one_or_more_as_pair" class="anchor"></a><code><span><span class="keyword">val</span> one_or_more_as_pair : <span><span><span class="type-var">'a</span> <a href="../Arg_type/index.html#type-t">Arg_type.t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'a</span> * <span><span class="type-var">'a</span> <a href="../../../../base/Base/index.html#type-list">Base.list</a></span>)</span> <a href="#type-flag">flag</a></span></span></code></div><div class="spec-doc"><p><code>one_or_more_as_pair</code> flags must be passed one or more times.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-one_or_more_as_list"><a href="#val-one_or_more_as_list" class="anchor"></a><code><span><span class="keyword">val</span> one_or_more_as_list : <span><span><span class="type-var">'a</span> <a href="../Arg_type/index.html#type-t">Arg_type.t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="../../../../base/Base/index.html#type-list">Base.list</a></span> <a href="#type-flag">flag</a></span></span></code></div><div class="spec-doc"><p>Like <code>one_or_more_as_pair</code>, but returns the flag values as a list.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-no_arg"><a href="#val-no_arg" class="anchor"></a><code><span><span class="keyword">val</span> no_arg : <span><a href="../../../../base/Base/index.html#type-bool">Base.bool</a> <a href="#type-flag">flag</a></span></span></code></div><div class="spec-doc"><p><code>no_arg</code> flags may be passed at most once. The boolean returned is true iff the flag is passed on the command line.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-no_arg_register"><a href="#val-no_arg_register" class="anchor"></a><code><span><span class="keyword">val</span> no_arg_register : 
  <span><span class="label">key</span>:<span><span class="type-var">'a</span> <a href="../../../univ_map/Univ_map/With_default/Key/index.html#type-t">Univ_map.With_default.Key.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">value</span>:<span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../../../base/Base/index.html#type-bool">Base.bool</a> <a href="#type-flag">flag</a></span></span></code></div><div class="spec-doc"><p><code>no_arg_register ~key ~value</code> is like <code>no_arg</code>, but associates <code>value</code> with <code>key</code> in the autocomplete environment.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-no_arg_some"><a href="#val-no_arg_some" class="anchor"></a><code><span><span class="keyword">val</span> no_arg_some : <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="../../../../base/Base/index.html#type-option">Base.option</a></span> <a href="#type-flag">flag</a></span></span></code></div><div class="spec-doc"><p><code>no_arg_some value</code> is like <code>no_arg</code>, but will return <code>Some value</code> if the flag is passed on the command line, and return <code>None</code> otherwise.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-no_arg_required"><a href="#val-no_arg_required" class="anchor"></a><code><span><span class="keyword">val</span> no_arg_required : <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-flag">flag</a></span></span></code></div><div class="spec-doc"><p><code>no_arg_required value</code> is like <code>no_arg</code>, but the argument is required. This is useful in combination with <code>choose_one_non_optional</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-no_arg_abort"><a href="#val-no_arg_abort" class="anchor"></a><code><span><span class="keyword">val</span> no_arg_abort : <span><span class="label">exit</span>:<span>(<span><a href="../../../../base/Base/index.html#type-unit">Base.unit</a> <span class="arrow">&#45;&gt;</span></span> <a href="../../../../base/Base/Nothing/index.html#type-t">Base.Nothing.t</a>)</span> <span class="arrow">&#45;&gt;</span></span> <span><a href="../../../../base/Base/index.html#type-unit">Base.unit</a> <a href="#type-flag">flag</a></span></span></code></div><div class="spec-doc"><p><code>no_arg_abort ~exit</code> is like <code>no_arg</code>, but aborts command-line parsing by calling <code>exit</code>. This flag type is useful for &quot;help&quot;-style flags that just print something and exit.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-escape"><a href="#val-escape" class="anchor"></a><code><span><span class="keyword">val</span> escape : <span><span><span><a href="../../../../base/Base/index.html#type-string">Base.string</a> <a href="../../../../base/Base/index.html#type-list">Base.list</a></span> <a href="../../../../base/Base/index.html#type-option">Base.option</a></span> <a href="#type-flag">flag</a></span></span></code></div><div class="spec-doc"><p><code>escape</code> flags may be passed at most once. They cause the command line parser to abort and pass through all remaining command line arguments as the value of the flag.</p><p>A standard choice of flag name to use with <code>escape</code> is <code>&quot;--&quot;</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-escape_with_autocomplete"><a href="#val-escape_with_autocomplete" class="anchor"></a><code><span><span class="keyword">val</span> escape_with_autocomplete : 
  <span><span class="label">complete</span>:<a href="../Auto_complete/For_escape/index.html#type-t">Auto_complete.For_escape.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span><a href="../../../../base/Base/index.html#type-string">Base.string</a> <a href="../../../../base/Base/index.html#type-list">Base.list</a></span> <a href="../../../../base/Base/index.html#type-option">Base.option</a></span> <a href="#type-flag">flag</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-map_flag"><a href="#val-map_flag" class="anchor"></a><code><span><span class="keyword">val</span> map_flag : <span><span><span class="type-var">'a</span> <a href="#type-flag">flag</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="label">f</span>:<span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'b</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> <a href="#type-flag">flag</a></span></span></code></div><div class="spec-doc"><p><code>map_flag flag ~f</code> transforms the parsed result of <code>flag</code> by applying <code>f</code>.</p></div></div></details></div><div class="odoc-spec"><div class="spec value anchored" id="val-flags_of_args_exn"><a href="#val-flags_of_args_exn" class="anchor"></a><code><span><span class="keyword">val</span> flags_of_args_exn : <span><span><span>(<a href="../../../../../stdlib/Stdlib/Arg/index.html#type-key">Arg.key</a> * <a href="../../../../../stdlib/Stdlib/Arg/index.html#type-spec">Arg.spec</a> * <a href="../../../../../stdlib/Stdlib/Arg/index.html#type-doc">Arg.doc</a>)</span> <a href="../../../../base/Base/index.html#type-list">Base.list</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'a</span>, <span class="type-var">'a</span>)</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>flags_of_args_exn args</code> creates a spec from <code>Caml.Arg.t</code>s, for compatibility with OCaml's base libraries. Fails if it encounters an arg that cannot be converted.</p><p>NOTE: There is a difference in side effect ordering between <code>Caml.Arg</code> and <code>Command</code>. In the <code>Arg</code> module, flag handling functions embedded in <code>Caml.Arg.t</code> values will be run in the order that flags are passed on the command line. In the <code>Command</code> module, using <code>flags_of_args_exn flags</code>, they are evaluated in the order that the <code>Caml.Arg.t</code> values appear in <code>args</code>.</p><ul class="at-tags"><li class="deprecated"><span class="at-tag">deprecated</span> [since 2018-10] switch to Command.Param</li></ul></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-anons"><a href="#type-anons" class="anchor"></a><code><span><span class="keyword">type</span> <span>'a anons</span></span><span> = <span><span class="type-var">'a</span> <a href="../Anons/index.html#type-t">Anons.t</a></span></span></code></div><div class="spec-doc"><p>A specification of some number of anonymous arguments.</p></div></div><div class="odoc-include"><details open="open"><summary class="spec include"><code><span><span class="keyword">include</span> <span class="keyword">module</span> <span class="keyword">type</span> <span class="keyword">of</span> <a href="../Anons/index.html">Anons</a> <span class="keyword">with</span> <span><span class="keyword">type</span> <span>'a <a href="../Anons/index.html#type-t">t</a></span> := <span><span class="type-var">'a</span> <a href="#type-anons">anons</a></span></span></span></code></summary><div class="odoc-spec"><div class="spec value anchored" id="val-(%:)"><a href="#val-(%:)" class="anchor"></a><code><span><span class="keyword">val</span> (%:) : <span><a href="../../../../base/Base/index.html#type-string">Base.string</a> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="../Arg_type/index.html#type-t">Arg_type.t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-anons">anons</a></span></span></code></div><div class="spec-doc"><p><code>(name %: typ)</code> specifies a required anonymous argument of type <code>typ</code>.</p><p>The <code>name</code> must not be surrounded by whitespace; if it is, an exn will be raised.</p><p>If the <code>name</code> is surrounded by a special character pair (&lt;&gt;, {}, [] or (),) <code>name</code> will remain as-is, otherwise, <code>name</code> will be uppercased.</p><p>In the situation where <code>name</code> is only prefixed or only suffixed by one of the special character pairs, or different pairs are used (e.g., &quot;&lt;ARG]&quot;), an exn will be raised.</p><p>The (possibly transformed) <code>name</code> is mentioned in the generated help for the command.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-sequence"><a href="#val-sequence" class="anchor"></a><code><span><span class="keyword">val</span> sequence : <span><span><span class="type-var">'a</span> <a href="#type-anons">anons</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="../../../../base/Base/index.html#type-list">Base.list</a></span> <a href="#type-anons">anons</a></span></span></code></div><div class="spec-doc"><p><code>sequence anons</code> specifies a sequence of anonymous arguments. An exception will be raised if <code>anons</code> matches anything other than a fixed number of anonymous arguments.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-non_empty_sequence_as_pair"><a href="#val-non_empty_sequence_as_pair" class="anchor"></a><code><span><span class="keyword">val</span> non_empty_sequence_as_pair : <span><span><span class="type-var">'a</span> <a href="#type-anons">anons</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'a</span> * <span><span class="type-var">'a</span> <a href="../../../../base/Base/index.html#type-list">Base.list</a></span>)</span> <a href="#type-anons">anons</a></span></span></code></div><div class="spec-doc"><p><code>non_empty_sequence_as_pair anons</code> and <code>non_empty_sequence_as_list anons</code> are like <code>sequence anons</code> except that an exception will be raised if there is not at least one anonymous argument given.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-non_empty_sequence_as_list"><a href="#val-non_empty_sequence_as_list" class="anchor"></a><code><span><span class="keyword">val</span> non_empty_sequence_as_list : <span><span><span class="type-var">'a</span> <a href="#type-anons">anons</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="../../../../base/Base/index.html#type-list">Base.list</a></span> <a href="#type-anons">anons</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-maybe"><a href="#val-maybe" class="anchor"></a><code><span><span class="keyword">val</span> maybe : <span><span><span class="type-var">'a</span> <a href="#type-anons">anons</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="../../../../base/Base/index.html#type-option">Base.option</a></span> <a href="#type-anons">anons</a></span></span></code></div><div class="spec-doc"><p><code>(maybe anons)</code> indicates that some anonymous arguments are optional.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-maybe_with_default"><a href="#val-maybe_with_default" class="anchor"></a><code><span><span class="keyword">val</span> maybe_with_default : <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-anons">anons</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-anons">anons</a></span></span></code></div><div class="spec-doc"><p><code>(maybe_with_default default anons)</code> indicates an optional anonymous argument with a default value.</p></div></div><p><code>t2</code>, <code>t3</code>, and <code>t4</code> each concatenate multiple anonymous argument specs into a single one. The purpose of these combinators is to allow for optional sequences of anonymous arguments. Consider a command with usage:</p><pre>main.exe FOO [BAR BAZ]</pre><p>where the second and third anonymous arguments must either both be there or both not be there. This can be expressed as:</p><pre class="language-ocaml"><code>  t2 (&quot;FOO&quot; %: foo) (maybe (t2 (&quot;BAR&quot; %: bar) (&quot;BAZ&quot; %: baz)))]</code></pre><p>Sequences of 5 or more anonymous arguments can be built up using nested tuples:</p><pre class="language-ocaml"><code>  maybe (t3 a b (t3 c d e))</code></pre><div class="odoc-spec"><div class="spec value anchored" id="val-t2"><a href="#val-t2" class="anchor"></a><code><span><span class="keyword">val</span> t2 : <span><span><span class="type-var">'a</span> <a href="#type-anons">anons</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'b</span> <a href="#type-anons">anons</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'a</span> * <span class="type-var">'b</span>)</span> <a href="#type-anons">anons</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-t3"><a href="#val-t3" class="anchor"></a><code><span><span class="keyword">val</span> t3 : <span><span><span class="type-var">'a</span> <a href="#type-anons">anons</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'b</span> <a href="#type-anons">anons</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'c</span> <a href="#type-anons">anons</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'a</span> * <span class="type-var">'b</span> * <span class="type-var">'c</span>)</span> <a href="#type-anons">anons</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-t4"><a href="#val-t4" class="anchor"></a><code><span><span class="keyword">val</span> t4 : 
  <span><span><span class="type-var">'a</span> <a href="#type-anons">anons</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'b</span> <a href="#type-anons">anons</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'c</span> <a href="#type-anons">anons</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'d</span> <a href="#type-anons">anons</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span class="type-var">'a</span> * <span class="type-var">'b</span> * <span class="type-var">'c</span> * <span class="type-var">'d</span>)</span> <a href="#type-anons">anons</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-map_anons"><a href="#val-map_anons" class="anchor"></a><code><span><span class="keyword">val</span> map_anons : <span><span><span class="type-var">'a</span> <a href="#type-anons">anons</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="label">f</span>:<span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'b</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> <a href="#type-anons">anons</a></span></span></code></div><div class="spec-doc"><p><code>map_anons anons ~f</code> transforms the parsed result of <code>anons</code> by applying <code>f</code>.</p></div></div></details></div><p>Conversions to and from new-style <code>Param</code> command line specifications.</p><div class="odoc-spec"><div class="spec value anchored" id="val-to_param"><a href="#val-to_param" class="anchor"></a><code><span><span class="keyword">val</span> to_param : <span><span><span>(<span class="type-var">'a</span>, <span class="type-var">'r</span>)</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'r</span> <a href="../Param/index.html#type-t">Param.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-of_param"><a href="#val-of_param" class="anchor"></a><code><span><span class="keyword">val</span> of_param : <span><span><span class="type-var">'r</span> <a href="../Param/index.html#type-t">Param.t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span><span class="type-var">'r</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'m</span>, <span class="type-var">'m</span>)</span> <a href="#type-t">t</a></span></span></code></div></div></div></body></html>
