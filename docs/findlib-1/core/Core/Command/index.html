<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Command (docs.findlib-1.core.Core.Command)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 3.0.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script><script>let base_url = '../../../../../';
let search_urls = ['../../../../db.js','../../../../sherlodoc.js'];
</script><script src="../../../../odoc.support/odoc_search.js" defer="defer"></script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../../../../index.html">Index</a> &#x00BB; <a href="../../../../index.html">docs</a> &#x00BB; <a href="../../../index.html">findlib-1</a> &#x00BB; <a href="../../index.html">core</a> &#x00BB; <a href="../index.html">Core</a> &#x00BB; Command</nav><div class="odoc-search"><div class="search-inner"><input class="search-bar" placeholder="ðŸ”Ž Type '/' to search..."/><div class="search-snake"></div><div class="search-result"></div></div></div><header class="odoc-preamble"><h1>Module <code><span>Core.Command</span></code></h1></header><div class="odoc-content"><div class="odoc-include"><details open="open"><summary class="spec include"><code><span><span class="keyword">include</span> <span class="keyword">module</span> <span class="keyword">type</span> <span class="keyword">of</span> <span class="keyword">struct</span> <span class="keyword">include</span> <a href="../../command/Command/index.html">Command</a> <span class="keyword">end</span></span></code></summary><div class="odoc-spec"><div class="spec module-type anchored" id="module-type-Enumerable_sexpable"><a href="#module-type-Enumerable_sexpable" class="anchor"></a><code><span><span class="keyword">module</span> <span class="keyword">type</span> Enumerable_sexpable</span><span> = <a href="../../command/Command/module-type-Enumerable_sexpable/index.html">Command.Enumerable_sexpable</a></span></code></div></div><div class="odoc-spec"><div class="spec module-type anchored" id="module-type-Enumerable_stringable"><a href="#module-type-Enumerable_stringable" class="anchor"></a><code><span><span class="keyword">module</span> <span class="keyword">type</span> Enumerable_stringable</span><span> = <a href="../../command/Command/module-type-Enumerable_stringable/index.html">Command.Enumerable_stringable</a></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Auto_complete"><a href="#module-Auto_complete" class="anchor"></a><code><span><span class="keyword">module</span> Auto_complete</span><span> = <a href="../../command/Command/Auto_complete/index.html">Command.Auto_complete</a></span></code></div><div class="spec-doc"><p>Specifications for command-line auto-completion.</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Flag"><a href="#module-Flag" class="anchor"></a><code><span><span class="keyword">module</span> Flag</span><span> = <a href="../../command/Command/Flag/index.html">Command.Flag</a></span></code></div><div class="spec-doc"><p>Command-line flag specifications.</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Anons"><a href="#module-Anons" class="anchor"></a><code><span><span class="keyword">module</span> Anons</span><span> = <a href="../../command/Command/Anons/index.html">Command.Anons</a></span></code></div><div class="spec-doc"><p>Anonymous command-line argument specification.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-t"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> t</span><span> = <a href="../../command/Command/index.html#type-t">Command.t</a></span></code></div><div class="spec-doc"><p>Commands which can be combined into a hierarchy of subcommands.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-basic_spec_command"><a href="#type-basic_spec_command" class="anchor"></a><code><span><span class="keyword">type</span> <span>('main, 'result) basic_spec_command</span></span><span> =
  <span><span class="label">summary</span>:<a href="../../../base/Base/index.html#type-string">Base.string</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?readme</span>:<span>(<span><a href="../../../base/Base/index.html#type-unit">Base.unit</a> <span class="arrow">&#45;&gt;</span></span> <a href="../../../base/Base/index.html#type-string">Base.string</a>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'main</span>, <span><a href="../../../base/Base/index.html#type-unit">Base.unit</a> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'result</span>)</span> <a href="../../command/Command/Spec/index.html#type-t">Command.Spec.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'main</span> <span class="arrow">&#45;&gt;</span></span>
  <a href="#type-t">t</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-basic_spec"><a href="#val-basic_spec" class="anchor"></a><code><span><span class="keyword">val</span> basic_spec : <span><span>(<span class="type-var">'main</span>, <a href="../../../base/Base/index.html#type-unit">Base.unit</a>)</span> <a href="#type-basic_spec_command">basic_spec_command</a></span></span></code></div><div class="spec-doc"><p><code>basic_spec ~summary ?readme spec main</code> is a basic command that executes a function <code>main</code> which is passed parameters parsed from the command line according to <code>spec</code>. <code>summary</code> is to contain a short one-line description of its behavior. <code>readme</code> is to contain any longer description of its behavior that will go on that command's help screen.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-basic_command"><a href="#type-basic_command" class="anchor"></a><code><span><span class="keyword">type</span> <span>'result basic_command</span></span><span> =
  <span><span class="label">summary</span>:<a href="../../../base/Base/index.html#type-string">Base.string</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?readme</span>:<span>(<span><a href="../../../base/Base/index.html#type-unit">Base.unit</a> <span class="arrow">&#45;&gt;</span></span> <a href="../../../base/Base/index.html#type-string">Base.string</a>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span><a href="../../../base/Base/index.html#type-unit">Base.unit</a> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'result</span>)</span> <a href="../../command/Command/Param/index.html#type-t">Command.Param.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <a href="#type-t">t</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-basic"><a href="#val-basic" class="anchor"></a><code><span><span class="keyword">val</span> basic : <span><a href="../../../base/Base/index.html#type-unit">Base.unit</a> <a href="#type-basic_command">basic_command</a></span></span></code></div><div class="spec-doc"><p>Same general behavior as <code>basic_spec</code>, but takes a command line specification built up using <code>Params</code> instead of <code>Spec</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-basic_or_error"><a href="#val-basic_or_error" class="anchor"></a><code><span><span class="keyword">val</span> basic_or_error : <span><span><a href="../../../base/Base/index.html#type-unit">Base.unit</a> <a href="../../../base/Base/Or_error/index.html#type-t">Base.Or_error.t</a></span> <a href="#type-basic_command">basic_command</a></span></span></code></div><div class="spec-doc"><p><code>basic_or_error</code> is like <code>basic</code>, except that the main function it expects may return an error, in which case it prints out the error message and shuts down with exit code 1.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-group"><a href="#val-group" class="anchor"></a><code><span><span class="keyword">val</span> group : 
  <span><span class="label">summary</span>:<a href="../../../base/Base/index.html#type-string">Base.string</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?readme</span>:<span>(<span><a href="../../../base/Base/index.html#type-unit">Base.unit</a> <span class="arrow">&#45;&gt;</span></span> <a href="../../../base/Base/index.html#type-string">Base.string</a>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?preserve_subcommand_order</span>:<a href="../../../base/Base/index.html#type-unit">Base.unit</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?body</span>:<span>(<span><span class="label">path</span>:<span><a href="../../../base/Base/index.html#type-string">Base.string</a> <a href="../../../base/Base/index.html#type-list">Base.list</a></span> <span class="arrow">&#45;&gt;</span></span> <a href="../../../base/Base/index.html#type-unit">Base.unit</a>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<a href="../../../base/Base/index.html#type-string">Base.string</a> * <a href="#type-t">t</a>)</span> <a href="../../../base/Base/index.html#type-list">Base.list</a></span> <span class="arrow">&#45;&gt;</span></span>
  <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>group ~summary subcommand_alist</code> is a compound command with named subcommands, as found in <code>subcommand_alist</code>. <code>summary</code> is to contain a short one-line description of the command group. <code>readme</code> is to contain any longer description of its behavior that will go on that command's help screen.</p><p>NOTE: subcommand names containing underscores will be rejected; use dashes instead.</p><p><code>body</code> is called when no additional arguments are passed -- in particular, when no subcommand is passed. Its <code>path</code> argument is the subcommand path by which the group command was reached.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-lazy_group"><a href="#val-lazy_group" class="anchor"></a><code><span><span class="keyword">val</span> lazy_group : 
  <span><span class="label">summary</span>:<a href="../../../base/Base/index.html#type-string">Base.string</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?readme</span>:<span>(<span><a href="../../../base/Base/index.html#type-unit">Base.unit</a> <span class="arrow">&#45;&gt;</span></span> <a href="../../../base/Base/index.html#type-string">Base.string</a>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?preserve_subcommand_order</span>:<a href="../../../base/Base/index.html#type-unit">Base.unit</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?body</span>:<span>(<span><span class="label">path</span>:<span><a href="../../../base/Base/index.html#type-string">Base.string</a> <a href="../../../base/Base/index.html#type-list">Base.list</a></span> <span class="arrow">&#45;&gt;</span></span> <a href="../../../base/Base/index.html#type-unit">Base.unit</a>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span><span>(<a href="../../../base/Base/index.html#type-string">Base.string</a> * <a href="#type-t">t</a>)</span> <a href="../../../base/Base/index.html#type-list">Base.list</a></span> <a href="../../../base/Base/Lazy/index.html#type-t">Base.Lazy.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>lazy_group</code> is the same as <code>group</code>, except that the list of subcommands may be generated lazily.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-exec"><a href="#val-exec" class="anchor"></a><code><span><span class="keyword">val</span> exec : 
  <span><span class="label">summary</span>:<a href="../../../base/Base/index.html#type-string">Base.string</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?readme</span>:<span>(<span><a href="../../../base/Base/index.html#type-unit">Base.unit</a> <span class="arrow">&#45;&gt;</span></span> <a href="../../../base/Base/index.html#type-string">Base.string</a>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?child_subcommand</span>:<span><a href="../../../base/Base/index.html#type-string">Base.string</a> <a href="../../../base/Base/index.html#type-list">Base.list</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?env</span>:
    <span>[ <span>`Replace of <span><span>(<a href="../../../base/Base/index.html#type-string">Base.string</a> * <a href="../../../base/Base/index.html#type-string">Base.string</a>)</span> <a href="../../../base/Base/index.html#type-list">Base.list</a></span></span>
    <span><span>| `Extend</span> of <span><span>(<a href="../../../base/Base/index.html#type-string">Base.string</a> * <a href="../../../base/Base/index.html#type-string">Base.string</a>)</span> <a href="../../../base/Base/index.html#type-list">Base.list</a></span></span>
    <span><span>| `Override</span> of <span><span>(<a href="../../../base/Base/index.html#type-string">Base.string</a> * <span><a href="../../../base/Base/index.html#type-string">Base.string</a> <a href="../../../base/Base/index.html#type-option">Base.option</a></span>)</span> <a href="../../../base/Base/index.html#type-list">Base.list</a></span></span>
    <span><span>| `Replace_raw</span> of <span><a href="../../../base/Base/index.html#type-string">Base.string</a> <a href="../../../base/Base/index.html#type-list">Base.list</a></span></span> ]</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">path_to_exe</span>:
    <span>[ <span>`Absolute of <a href="../../../base/Base/index.html#type-string">Base.string</a></span>
    <span><span>| `Relative_to_argv0</span> of <a href="../../../base/Base/index.html#type-string">Base.string</a></span>
    <span><span>| `Relative_to_me</span> of <a href="../../../base/Base/index.html#type-string">Base.string</a></span> ]</span> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../../base/Base/index.html#type-unit">Base.unit</a> <span class="arrow">&#45;&gt;</span></span>
  <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>exec ~summary ~path_to_exe</code> runs <code>exec</code> on the executable at <code>path_to_exe</code>. If <code>path_to_exe</code> is <code>`Absolute path</code> then <code>path</code> is executed without any further qualification. If it is <code>`Relative_to_me path</code> then <code>Filename.dirname Sys.executable_name ^ &quot;/&quot; ^ path</code> is executed instead. All of the usual caveats about <code>Sys.executable_name</code> apply: specifically, it may only return an absolute path in Linux. On other operating systems it will return <code>Sys.argv.(0)</code>. If it is <code>`Relative_to_argv0 path</code> then <code>Sys.argv.(0) ^ &quot;/&quot; ^ path</code> is executed.</p><p>The <code>child_subcommand</code> argument allows referencing a subcommand one or more levels below the top-level of the child executable. It should <em>not</em> be used to pass flags or anonymous arguments to the child.</p><p>Care has been taken to support nesting multiple executables built with Command. In particular, recursive help and autocompletion should work as expected.</p><p>NOTE: Non-Command executables can be used with this function but will still be executed when <code>help -recursive</code> is called or autocompletion is attempted (despite the fact that neither will be particularly helpful in this case). This means that if you have a shell script called &quot;reboot-everything.sh&quot; that takes no arguments and reboots everything no matter how it is called, you shouldn't use it with <code>exec</code>.</p><p>Additionally, no loop detection is attempted, so if you nest an executable within itself, <code>help -recursive</code> and autocompletion will hang forever (although actually running the subcommand will work).</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-of_lazy"><a href="#val-of_lazy" class="anchor"></a><code><span><span class="keyword">val</span> of_lazy : <span><span><a href="#type-t">t</a> <a href="../../../base/Base/Lazy/index.html#type-t">Base.Lazy.t</a></span> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>of_lazy thunk</code> constructs a lazy command that is forced only when necessary to run it or extract its shape.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-summary"><a href="#val-summary" class="anchor"></a><code><span><span class="keyword">val</span> summary : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="../../../base/Base/index.html#type-string">Base.string</a></span></code></div><div class="spec-doc"><p>Extracts the summary string for a command.</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Shape"><a href="#module-Shape" class="anchor"></a><code><span><span class="keyword">module</span> Shape</span><span> = <a href="../../command/Command/Shape/index.html">Command.Shape</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-exit"><a href="#val-exit" class="anchor"></a><code><span><span class="keyword">val</span> exit : <span><a href="../../../base/Base/index.html#type-int">Base.int</a> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">_</span></span></code></div><div class="spec-doc"><p>call this instead of <code>Core.exit</code> if in command-related code that you want to run in tests. For example, in the body of <code>Command.Param.no_arg_abort</code></p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-For_telemetry"><a href="#module-For_telemetry" class="anchor"></a><code><span><span class="keyword">module</span> For_telemetry</span><span> = <a href="../../command/Command/For_telemetry/index.html">Command.For_telemetry</a></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Deprecated"><a href="#module-Deprecated" class="anchor"></a><code><span><span class="keyword">module</span> Deprecated</span><span> = <a href="../../command/Command/Deprecated/index.html">Command.Deprecated</a></span></code></div><div class="spec-doc"><p><code>Deprecated</code> should be used only by <code>Deprecated_command</code>. At some point it will go away.</p></div></div><p>Deprecated values that moved from <code>Core.Command</code> to <code>Command_unix</code>.</p><div class="odoc-spec"><div class="spec value anchored" id="val-run"><a href="#val-run" class="anchor"></a><code><span><span class="keyword">val</span> run : <span>[ `Use_Command_unix ]</span></span></code></div><div class="spec-doc"><ul class="at-tags"><li class="deprecated"><span class="at-tag">deprecated</span> [since 2021-03] Use [Command_unix]</li></ul></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Path"><a href="#module-Path" class="anchor"></a><code><span><span class="keyword">module</span> Path</span><span> = <a href="../../command/Command/Path/index.html">Command.Path</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-shape"><a href="#val-shape" class="anchor"></a><code><span><span class="keyword">val</span> shape : <span>[ `Use_Command_unix ]</span></span></code></div><div class="spec-doc"><ul class="at-tags"><li class="deprecated"><span class="at-tag">deprecated</span> [since 2021-03] Use [Command_unix]</li></ul></div></div></details></div><div class="odoc-spec"><div class="spec module anchored" id="module-Arg_type"><a href="#module-Arg_type" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Arg_type/index.html">Arg_type</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Param"><a href="#module-Param" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Param/index.html">Param</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Spec"><a href="#module-Spec" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Spec/index.html">Spec</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Let_syntax"><a href="#module-Let_syntax" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Let_syntax/index.html">Let_syntax</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div></div></body></html>
