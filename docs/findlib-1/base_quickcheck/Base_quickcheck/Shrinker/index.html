<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Shrinker (docs.findlib-1.base_quickcheck.Base_quickcheck.Shrinker)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 3.0.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script><script>let base_url = '../../../../../';
let search_urls = ['../../../../db.js','../../../../sherlodoc.js'];
</script><script src="../../../../odoc.support/odoc_search.js" defer="defer"></script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../../../../index.html">Index</a> &#x00BB; <a href="../../../../index.html">docs</a> &#x00BB; <a href="../../../index.html">findlib-1</a> &#x00BB; <a href="../../index.html">base_quickcheck</a> &#x00BB; <a href="../index.html">Base_quickcheck</a> &#x00BB; Shrinker</nav><div class="odoc-search"><div class="search-inner"><input class="search-bar" placeholder="ðŸ”Ž Type '/' to search..."/><div class="search-snake"></div><div class="search-result"></div></div></div><header class="odoc-preamble"><h1>Module <code><span>Base_quickcheck.Shrinker</span></code></h1><p>Shrinkers produce small values from large values. When a random test case fails, a shrinker finds the simplest version of the problem.</p></header><div class="odoc-tocs"><nav class="odoc-toc odoc-local-toc"><ul><li><a href="#basic-shrinkers">Basic Shrinkers</a></li><li><a href="#modifying-shrinkers">Modifying Shrinkers</a></li><li><a href="#shrinkers-for-recursive-types">Shrinkers for Recursive Types</a></li><li><a href="#low-level-functions">Low-level functions</a></li></ul></nav></div><div class="odoc-content"><div class="odoc-spec"><div class="spec type anchored" id="type-t"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> <span>'a t</span></span></code></div></div><h3 id="basic-shrinkers"><a href="#basic-shrinkers" class="anchor"></a>Basic Shrinkers</h3><div class="odoc-spec"><div class="spec value anchored" id="val-atomic"><a href="#val-atomic" class="anchor"></a><code><span><span class="keyword">val</span> atomic : <span><span class="type-var">_</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p>This shrinker treats a type as atomic, never attempting to produce smaller values.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-unit"><a href="#val-unit" class="anchor"></a><code><span><span class="keyword">val</span> unit : <span><a href="../../../base/Base/index.html#type-unit">Base.unit</a> <a href="#type-t">t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-bool"><a href="#val-bool" class="anchor"></a><code><span><span class="keyword">val</span> bool : <span><a href="../../../base/Base/index.html#type-bool">Base.bool</a> <a href="#type-t">t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-char"><a href="#val-char" class="anchor"></a><code><span><span class="keyword">val</span> char : <span><a href="../../../base/Base/index.html#type-char">Base.char</a> <a href="#type-t">t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-string"><a href="#val-string" class="anchor"></a><code><span><span class="keyword">val</span> string : <span><a href="../../../base/Base/index.html#type-string">Base.string</a> <a href="#type-t">t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-bytes"><a href="#val-bytes" class="anchor"></a><code><span><span class="keyword">val</span> bytes : <span><a href="../../../base/Base/index.html#type-bytes">Base.bytes</a> <a href="#type-t">t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-int"><a href="#val-int" class="anchor"></a><code><span><span class="keyword">val</span> int : <span><a href="../../../base/Base/index.html#type-int">Base.int</a> <a href="#type-t">t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-int32"><a href="#val-int32" class="anchor"></a><code><span><span class="keyword">val</span> int32 : <span><a href="../../../base/Base/index.html#type-int32">Base.int32</a> <a href="#type-t">t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-int63"><a href="#val-int63" class="anchor"></a><code><span><span class="keyword">val</span> int63 : <span><a href="../../../base/Base/Int63/index.html#type-t">Base.Int63.t</a> <a href="#type-t">t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-int64"><a href="#val-int64" class="anchor"></a><code><span><span class="keyword">val</span> int64 : <span><a href="../../../base/Base/index.html#type-int64">Base.int64</a> <a href="#type-t">t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-nativeint"><a href="#val-nativeint" class="anchor"></a><code><span><span class="keyword">val</span> nativeint : <span><a href="../../../base/Base/index.html#type-nativeint">Base.nativeint</a> <a href="#type-t">t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-float"><a href="#val-float" class="anchor"></a><code><span><span class="keyword">val</span> float : <span><a href="../../../base/Base/index.html#type-float">Base.float</a> <a href="#type-t">t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-sexp"><a href="#val-sexp" class="anchor"></a><code><span><span class="keyword">val</span> sexp : <span><a href="../../../base/Base/Sexp/index.html#type-t">Base.Sexp.t</a> <a href="#type-t">t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-option"><a href="#val-option" class="anchor"></a><code><span><span class="keyword">val</span> option : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="../../../base/Base/index.html#type-option">Base.option</a></span> <a href="#type-t">t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-list"><a href="#val-list" class="anchor"></a><code><span><span class="keyword">val</span> list : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="../../../base/Base/index.html#type-list">Base.list</a></span> <a href="#type-t">t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-array"><a href="#val-array" class="anchor"></a><code><span><span class="keyword">val</span> array : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="../../../base/Base/index.html#type-array">Base.array</a></span> <a href="#type-t">t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-ref"><a href="#val-ref" class="anchor"></a><code><span><span class="keyword">val</span> ref : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="../../../base/Base/index.html#type-ref">Base.ref</a></span> <a href="#type-t">t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-lazy_t"><a href="#val-lazy_t" class="anchor"></a><code><span><span class="keyword">val</span> lazy_t : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="../../../base/Base/Lazy/index.html#type-t">Base.Lazy.t</a></span> <a href="#type-t">t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-both"><a href="#val-both" class="anchor"></a><code><span><span class="keyword">val</span> both : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'b</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'a</span> * <span class="type-var">'b</span>)</span> <a href="#type-t">t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-either"><a href="#val-either" class="anchor"></a><code><span><span class="keyword">val</span> either : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'b</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span>(<span class="type-var">'a</span>, <span class="type-var">'b</span>)</span> <a href="../../../base/Base/Either/index.html#type-t">Base.Either.t</a></span> <a href="#type-t">t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-result"><a href="#val-result" class="anchor"></a><code><span><span class="keyword">val</span> result : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'b</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span>(<span class="type-var">'a</span>, <span class="type-var">'b</span>)</span> <a href="../../../base/Base/Result/index.html#type-t">Base.Result.t</a></span> <a href="#type-t">t</a></span></span></code></div></div><p>This helper module type exists separately just to <code>open Bigarray</code> in its scope.</p><div class="odoc-spec"><div class="spec value anchored" id="val-bigstring"><a href="#val-bigstring" class="anchor"></a><code><span><span class="keyword">val</span> bigstring : 
  <span><span><span>(<a href="../../../base/Base/index.html#type-char">Base.char</a>, <a href="../../../../stdlib/Stdlib/Bigarray/index.html#type-int8_unsigned_elt">Bigarray.int8_unsigned_elt</a>, <a href="../../../../stdlib/Stdlib/Bigarray/index.html#type-c_layout">Bigarray.c_layout</a>)</span> <a href="../../../../stdlib/Stdlib/Bigarray/Array1/index.html#type-t">Bigarray.Array1.t</a></span>
    <a href="#type-t">t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-float32_vec"><a href="#val-float32_vec" class="anchor"></a><code><span><span class="keyword">val</span> float32_vec : 
  <span><span><span>(<a href="../../../base/Base/index.html#type-float">Base.float</a>, <a href="../../../../stdlib/Stdlib/Bigarray/index.html#type-float32_elt">Bigarray.float32_elt</a>, <a href="../../../../stdlib/Stdlib/Bigarray/index.html#type-fortran_layout">Bigarray.fortran_layout</a>)</span> <a href="../../../../stdlib/Stdlib/Bigarray/Array1/index.html#type-t">Bigarray.Array1.t</a></span>
    <a href="#type-t">t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-float64_vec"><a href="#val-float64_vec" class="anchor"></a><code><span><span class="keyword">val</span> float64_vec : 
  <span><span><span>(<a href="../../../base/Base/index.html#type-float">Base.float</a>, <a href="../../../../stdlib/Stdlib/Bigarray/index.html#type-float64_elt">Bigarray.float64_elt</a>, <a href="../../../../stdlib/Stdlib/Bigarray/index.html#type-fortran_layout">Bigarray.fortran_layout</a>)</span> <a href="../../../../stdlib/Stdlib/Bigarray/Array1/index.html#type-t">Bigarray.Array1.t</a></span>
    <a href="#type-t">t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-float32_mat"><a href="#val-float32_mat" class="anchor"></a><code><span><span class="keyword">val</span> float32_mat : 
  <span><span><span>(<a href="../../../base/Base/index.html#type-float">Base.float</a>, <a href="../../../../stdlib/Stdlib/Bigarray/index.html#type-float32_elt">Bigarray.float32_elt</a>, <a href="../../../../stdlib/Stdlib/Bigarray/index.html#type-fortran_layout">Bigarray.fortran_layout</a>)</span> <a href="../../../../stdlib/Stdlib/Bigarray/Array2/index.html#type-t">Bigarray.Array2.t</a></span>
    <a href="#type-t">t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-float64_mat"><a href="#val-float64_mat" class="anchor"></a><code><span><span class="keyword">val</span> float64_mat : 
  <span><span><span>(<a href="../../../base/Base/index.html#type-float">Base.float</a>, <a href="../../../../stdlib/Stdlib/Bigarray/index.html#type-float64_elt">Bigarray.float64_elt</a>, <a href="../../../../stdlib/Stdlib/Bigarray/index.html#type-fortran_layout">Bigarray.fortran_layout</a>)</span> <a href="../../../../stdlib/Stdlib/Bigarray/Array2/index.html#type-t">Bigarray.Array2.t</a></span>
    <a href="#type-t">t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-map_t"><a href="#val-map_t" class="anchor"></a><code><span><span class="keyword">val</span> map_t : <span><span><span class="type-var">'key</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'data</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span>(<span class="type-var">'key</span>, <span class="type-var">'data</span>, <span class="type-var">'cmp</span>)</span> <a href="../../../base/Base/Map/index.html#type-t">Base.Map.t</a></span> <a href="#type-t">t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-set_t"><a href="#val-set_t" class="anchor"></a><code><span><span class="keyword">val</span> set_t : <span><span><span class="type-var">'elt</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span>(<span class="type-var">'elt</span>, <span class="type-var">'cmp</span>)</span> <a href="../../../base/Base/Set/index.html#type-t">Base.Set.t</a></span> <a href="#type-t">t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-map_tree_using_comparator"><a href="#val-map_tree_using_comparator" class="anchor"></a><code><span><span class="keyword">val</span> map_tree_using_comparator : 
  <span><span class="label">comparator</span>:<span><span>(<span class="type-var">'key</span>, <span class="type-var">'cmp</span>)</span> <a href="../../../base/Base/Comparator/index.html#type-t">Base.Comparator.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'key</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'data</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'key</span>, <span class="type-var">'data</span>, <span class="type-var">'cmp</span>)</span> <a href="../../../base/Base/Map/Using_comparator/Tree/index.html#type-t">Base.Map.Using_comparator.Tree.t</a></span> <a href="#type-t">t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-set_tree_using_comparator"><a href="#val-set_tree_using_comparator" class="anchor"></a><code><span><span class="keyword">val</span> set_tree_using_comparator : 
  <span><span class="label">comparator</span>:<span><span>(<span class="type-var">'elt</span>, <span class="type-var">'cmp</span>)</span> <a href="../../../base/Base/Comparator/index.html#type-t">Base.Comparator.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'elt</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'elt</span>, <span class="type-var">'cmp</span>)</span> <a href="../../../base/Base/Set/Using_comparator/Tree/index.html#type-t">Base.Set.Using_comparator.Tree.t</a></span> <a href="#type-t">t</a></span></span></code></div></div><h3 id="modifying-shrinkers"><a href="#modifying-shrinkers" class="anchor"></a>Modifying Shrinkers</h3><div class="odoc-spec"><div class="spec value anchored" id="val-map"><a href="#val-map" class="anchor"></a><code><span><span class="keyword">val</span> map : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="label">f</span>:<span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'b</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="label">f_inverse</span>:<span>(<span><span class="type-var">'b</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> <a href="#type-t">t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-filter"><a href="#val-filter" class="anchor"></a><code><span><span class="keyword">val</span> filter : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="label">f</span>:<span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <a href="../../../base/Base/index.html#type-bool">Base.bool</a>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-t">t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-filter_map"><a href="#val-filter_map" class="anchor"></a><code><span><span class="keyword">val</span> filter_map : 
  <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">f</span>:<span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> <a href="../../../base/Base/index.html#type-option">Base.option</a></span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">f_inverse</span>:<span>(<span><span class="type-var">'b</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'b</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p>Filters and maps according to <code>f</code>, and provides input to <code>t</code> via <code>f_inverse</code>. Only the <code>f</code> direction produces options, intentionally.</p></div></div><h3 id="shrinkers-for-recursive-types"><a href="#shrinkers-for-recursive-types" class="anchor"></a>Shrinkers for Recursive Types</h3><div class="odoc-spec"><div class="spec value anchored" id="val-fixed_point"><a href="#val-fixed_point" class="anchor"></a><code><span><span class="keyword">val</span> fixed_point : <span><span>(<span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-t">t</a></span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p>Ties the recursive knot to shrink recursive types.</p><p>For example, here is an shrinker for binary trees:</p><pre class="language-ocaml"><code>  let tree_shrinker leaf_shrinker =
    fixed_point (fun self -&gt;
      either leaf_shrinker (both self self)
      |&gt; map
           ~f:(function
             | First leaf -&gt; `Leaf leaf
             | Second (l, r) -&gt; `Node (l, r))
           ~f_inverse:(function
             | `Leaf leaf -&gt; First leaf
             | `Node (l, r) -&gt; Second (l, r)))</code></pre></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-of_lazy"><a href="#val-of_lazy" class="anchor"></a><code><span><span class="keyword">val</span> of_lazy : <span><span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <a href="../../../base/Base/Lazy/index.html#type-t">Base.Lazy.t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p>Creates a <code>t</code> that forces the lazy argument as necessary. Can be used to tie (mutually) recursive knots.</p></div></div><h3 id="low-level-functions"><a href="#low-level-functions" class="anchor"></a>Low-level functions</h3><p>Most users will not need to call these.</p><div class="odoc-spec"><div class="spec value anchored" id="val-create"><a href="#val-create" class="anchor"></a><code><span><span class="keyword">val</span> create : <span><span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="../../../base/Base/Sequence/index.html#type-t">Base.Sequence.t</a></span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-t">t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-shrink"><a href="#val-shrink" class="anchor"></a><code><span><span class="keyword">val</span> shrink : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="../../../base/Base/Sequence/index.html#type-t">Base.Sequence.t</a></span></span></code></div></div></div></body></html>
