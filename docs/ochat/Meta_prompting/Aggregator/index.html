<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Aggregator (ochat.Meta_prompting.Aggregator)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 3.1.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script><script>let base_url = '../../../';
let search_urls = ['../../db.js','../../../sherlodoc.js'];
</script><script src="../../../odoc.support/odoc_search.js" defer="defer"></script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../../index.html">Index</a> &#x00BB; <a href="../../index.html">ochat</a> &#x00BB; <a href="../index.html">Meta_prompting</a> &#x00BB; Aggregator</nav><div class="odoc-search"><div class="search-inner"><input class="search-bar" placeholder="ðŸ”Ž Type '/' to search..."/><div class="search-snake"></div><div class="search-result"></div></div></div><header class="odoc-preamble"><h1>Module <code><span>Meta_prompting.Aggregator</span></code></h1><p>Score aggregation utilities.</p><p>The module provides a small DSL for collapsing a collection of judge scores â€“ floats in <code>[0.0, 1.0]</code> by convention â€“ into a single scalar that can be compared across completions. An *aggregator* is simply a function of type <a href="#type-t" title="t"><code>float list -&gt; float</code></a> and thus can be passed around, partially applied, or composed like any other value.</p><p>All strategies in this module are *total*: they accept the empty list and return <code>0.0</code> so that callers do not need to special-case the degenerate situation where no votes are available.</p></header><div class="odoc-tocs"><nav class="odoc-toc odoc-local-toc"><ul><li><a href="#type">Type</a></li><li><a href="#pre-defined-strategies">Pre-defined strategies</a></li></ul></nav></div><div class="odoc-content"><h2 id="type"><a href="#type" class="anchor"></a>Type</h2><div class="odoc-spec"><div class="spec type anchored" id="type-t"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> t</span><span> = <span><span>float list</span> <span class="arrow">&#45;&gt;</span></span> float</span></code></div><div class="spec-doc"><p>A strategy for combining a (possibly empty) list of scores into a single scalar.</p></div></div><h2 id="pre-defined-strategies"><a href="#pre-defined-strategies" class="anchor"></a>Pre-defined strategies</h2><div class="odoc-spec"><div class="spec value anchored" id="val-mean"><a href="#val-mean" class="anchor"></a><code><span><span class="keyword">val</span> mean : <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>mean scores</code> returns the arithmetic mean of <code>scores</code>. The result is <code>0.0</code> when <code>scores</code> is empty.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-median"><a href="#val-median" class="anchor"></a><code><span><span class="keyword">val</span> median : <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>median scores</code> returns the median (50áµ—Ê° percentile) of <code>scores</code>. When the number of elements is even, the mean of the two middle values is used. Returns <code>0.0</code> for an empty list.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-trimmed_mean"><a href="#val-trimmed_mean" class="anchor"></a><code><span><span class="keyword">val</span> trimmed_mean : <span><span class="label">trim</span>:float <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>trimmed_mean ~trim scores</code> discards the lowest <code>trim</code> fraction and the highest <code>trim</code> fraction of <code>scores</code> before computing the mean.</p><p>The <code>trim</code> parameter must lie in the interval <code>[0.0, 0.5)]; values outside this range raise [Invalid_argument].  A common setting is [trim = 0.1] which yields a 10 % trimmed mean. If all elements are trimmed away, the function returns [0.0]. @raise Invalid_argument if [trim] âˆ‰ [[0.0, 0.5)). </code></p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-weighted"><a href="#val-weighted" class="anchor"></a><code><span><span class="keyword">val</span> weighted : <span><span class="label">weights</span>:<span>float list</span> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>weighted ~weights scores</code> returns the weighted arithmetic mean of <code>scores</code> using the supplied <code>weights</code>.</p><p>â€¢ The two lists must have the same length; otherwise the plain mean is returned as a safe fallback. â€¢ Negative weights are allowed, albeit discouraged. â€¢ If the sum of weights is zero the function returns <code>0.0</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-min"><a href="#val-min" class="anchor"></a><code><span><span class="keyword">val</span> min : <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>min scores</code> returns the minimum of <code>scores</code> or <code>0.0</code> when the list is empty.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-max"><a href="#val-max" class="anchor"></a><code><span><span class="keyword">val</span> max : <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>max scores</code> returns the maximum of <code>scores</code> or <code>0.0</code> when the list is empty.</p></div></div></div></body></html>
