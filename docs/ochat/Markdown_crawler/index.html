<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Markdown_crawler (ochat.Markdown_crawler)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../odoc.support/odoc.css"/><meta name="generator" content="odoc 3.1.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script><script>let base_url = '../../';
let search_urls = ['../db.js','../../sherlodoc.js'];
</script><script src="../../odoc.support/odoc_search.js" defer="defer"></script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">Index</a> &#x00BB; <a href="../index.html">ochat</a> &#x00BB; Markdown_crawler</nav><div class="odoc-search"><div class="search-inner"><input class="search-bar" placeholder="ðŸ”Ž Type '/' to search..."/><div class="search-snake"></div><div class="search-result"></div></div></div><header class="odoc-preamble"><h1>Module <code><span>Markdown_crawler</span></code></h1><p>Markdown file discovery.</p><p><a href="#val-crawl"><code>crawl</code></a> walks a directory tree, picks out hand-written Markdown files and streams their content to user code. The helper is IO-only: it does not parse or inspect the documents beyond basic filtering.</p></header><div class="odoc-tocs"><nav class="odoc-toc odoc-local-toc"><ul><li><a href="#example">Example</a></li></ul></nav></div><div class="odoc-content"><h2 id="example"><a href="#example" class="anchor"></a>Example</h2><pre class="language-ocaml"><code>  open Eio.Std

  let () =
    Eio_main.run @@ fun env -&gt;
    let root = Eio.Path.(env#fs / &quot;docs&quot;) in
    Markdown_crawler.crawl ~root ~f:(fun ~doc_path ~markdown -&gt;
      Fmt.pr &quot;â€¢ %s (%d bytes)@.&quot; doc_path (String.length markdown))</code></pre><div class="odoc-spec"><div class="spec value anchored" id="val-crawl"><a href="#val-crawl" class="anchor"></a><code><span><span class="keyword">val</span> crawl : 
  <span><span class="label">root</span>:<span><span class="type-var">_</span> <span class="xref-unresolved">Eio</span>.Path.t</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">f</span>:<span>(<span><span class="label">doc_path</span>:string <span class="arrow">&#45;&gt;</span></span> <span><span class="label">markdown</span>:string <span class="arrow">&#45;&gt;</span></span> unit)</span> <span class="arrow">&#45;&gt;</span></span>
  unit</span></code></div><div class="spec-doc"><p><code>crawl ~root ~f</code> traverses <code>root</code> recursively and invokes <code>f</code> for each Markdown document found.</p><p>A file is considered Markdown if its basename ends with one of <code>&quot;.md&quot;</code>, <code>&quot;.markdown&quot;</code> or <code>&quot;.mdown&quot;</code>. Files larger than <b>10 MiB</b> or empty files are skipped.</p><p>Arguments supplied to the callback: â€¢ <code>doc_path</code> â€“ path relative to <code>root</code> using POSIX separators. â€¢ <code>markdown</code> â€“ UTF-8 contents of the file.</p><p>Traversal details: â€¢ Uses <code>Eio.Fiber.List.iter</code> with <code>~max_fibers:25</code> for bounded concurrency at each directory level. â€¢ Ignore rules combine the root-level <code>.gitignore</code> (if present) with a built-in deny-list (<code>&quot;_build/&quot;</code>, <code>&quot;dist/&quot;</code>, <code>&quot;node_modules/&quot;</code>, â€¦).</p><p>Only exceptions raised from within <code>f</code> propagate to the caller; all other recoverable I/O problems are logged through <a href="../Log/index.html#val-emit"><code>Log.emit</code></a> and silently skipped.</p></div></div></div></body></html>
