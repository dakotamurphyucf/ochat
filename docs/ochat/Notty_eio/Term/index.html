<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Term (ochat.Notty_eio.Term)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 3.1.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script><script>let base_url = '../../../';
let search_urls = ['../../db.js','../../../sherlodoc.js'];
</script><script src="../../../odoc.support/odoc_search.js" defer="defer"></script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../../index.html">Index</a> &#x00BB; <a href="../../index.html">ochat</a> &#x00BB; <a href="../index.html">Notty_eio</a> &#x00BB; Term</nav><div class="odoc-search"><div class="search-inner"><input class="search-bar" placeholder="ðŸ”Ž Type '/' to search..."/><div class="search-snake"></div><div class="search-result"></div></div></div><header class="odoc-preamble"><h1>Module <code><span>Notty_eio.Term</span></code></h1><p>Full-screen terminal session bound to an Eio <code>Eio.Switch.t</code>.</p></header><div class="odoc-content"><div class="odoc-spec"><div class="spec type anchored" id="type-t"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> t</span></code></div><div class="spec-doc"><p>Handle representing an exclusive, full-screen Notty session.</p><p>Invariants: â€¢ The handle is valid only until <a href="#val-release"><code>release</code></a> (or the surrounding switch) finishes. â€¢ All operations are <i>not</i> thread-safe; call them from the fiber that executed the <a href="#val-run"><code>run</code></a> callback.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-run"><a href="#val-run" class="anchor"></a><code><span><span class="keyword">val</span> run : 
  <span><span class="optlabel">?nosig</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?mouse</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?bpaste</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">input</span>:<span><span class="type-var">_</span> <span class="xref-unresolved">Eio_unix</span>.source</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">output</span>:<span><span class="type-var">_</span> <span class="xref-unresolved">Eio_unix</span>.sink</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">on_event</span>:<span>(<span><span>[ <span class="xref-unresolved">Notty</span>.Unescape.event <span>| `Resize</span> ]</span> <span class="arrow">&#45;&gt;</span></span> unit)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span class="type-var">'a</span></span></code></div><div class="spec-doc"><p><code>run ?nosig ?mouse ?bpaste ~input ~output ~on_event fn</code> starts a full-screen Notty session and returns the result of <code>fn term</code>.</p><p>Internally this creates an Eio <code>Eio.Switch.t</code> nursery, spawns a daemon fiber that continuously feeds decoded events to <code>on_event</code>, and installs cleanup handlers (terminal attributes, SIGWINCH, etc.). The resources are guaranteed to be released when the function exits, even if it raises an exception.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-image"><a href="#val-image" class="anchor"></a><code><span><span class="keyword">val</span> image : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><span class="xref-unresolved">Notty</span>.image <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>image t img</code> renders <code>img</code> and flushes it to the terminal. Use this to draw a new frame.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-refresh"><a href="#val-refresh" class="anchor"></a><code><span><span class="keyword">val</span> refresh : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>refresh t</code> forces a redraw with the last image supplied via <a href="#val-image"><code>image</code></a>. This is useful after partial updates when re-using the previous frame.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-cursor"><a href="#val-cursor" class="anchor"></a><code><span><span class="keyword">val</span> cursor : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><span><span>(int * int)</span> option</span> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>cursor t pos</code> sets the cursor position. â€¢ <code>Some (x, y)</code> â€“ make the cursor visible at <code>(x, y)</code>. â€¢ <code>None</code> â€“ hide the cursor.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-size"><a href="#val-size" class="anchor"></a><code><span><span class="keyword">val</span> size : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> int * int</span></code></div><div class="spec-doc"><p>Current terminal size as <code>(cols, rows)</code>. The value is updated internally on every <code>`Resize</code> event.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-release"><a href="#val-release" class="anchor"></a><code><span><span class="keyword">val</span> release : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Manually terminate the session. Usually you do not need to call this â€“ it is executed automatically when the enclosing switch is released â€“ but it can be handy for early shutdown.</p></div></div></div></body></html>
