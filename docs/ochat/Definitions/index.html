<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Definitions (ochat.Definitions)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../odoc.support/odoc.css"/><meta name="generator" content="odoc 3.1.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script><script>let base_url = '../../';
let search_urls = ['../db.js','../../sherlodoc.js'];
</script><script src="../../odoc.support/odoc_search.js" defer="defer"></script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> ‚Äì <a href="../../index.html">Index</a> &#x00BB; <a href="../index.html">ochat</a> &#x00BB; Definitions</nav><div class="odoc-search"><div class="search-inner"><input class="search-bar" placeholder="üîé Type '/' to search..."/><div class="search-snake"></div><div class="search-result"></div></div></div><header class="odoc-preamble"><h1>Module <code><span>Definitions</span></code></h1><p>GPT function *definitions* exposed by the Ochat agent.</p><p>This module is **data-only** ‚Äì it bundles a catalogue of tool specifications that can be offered to the OpenAI function-calling API. Each sub-module implements <a href="../Ochat_function/module-type-Def/index.html"><code>Ochat_function.Def</code></a> and therefore provides four values that describe a tool but do *not* implement its runtime behaviour:</p><p>‚Ä¢ <code>name</code> ‚Äì unique identifier that the language model uses. ‚Ä¢ <code>description</code> ‚Äì one-paragraph human-readable summary. ‚Ä¢ <code>parameters</code> ‚Äì JSON schema (draft-07) of the expected input for standard function tools, or a custom tool ‚Äúformat‚Äù object for tools with <code>type_ = &quot;custom&quot;</code>. ‚Ä¢ <code>input_of_string</code> ‚Äì converts the JSON payload returned by the API into a strongly-typed OCaml value.</p><p>To obtain an *executable* tool you must pair the definition with an implementation using <a href="../Ochat_function/index.html#val-create_function"><code>Ochat_function.create_function</code></a>.</p><p>Nothing in this module performs I/O; all operations are pure and total.</p></header><div class="odoc-tocs"><nav class="odoc-toc odoc-local-toc"><ul><li><a href="#catalogue">Catalogue</a></li><li><a href="#meta-prompting-helpers">Meta-prompting helpers</a></li><li><a href="#index_markdown_docs">Index_markdown_docs</a></li><li><a href="#markdown_search">Markdown_search</a></li></ul></nav></div><div class="odoc-content"><h2 id="catalogue"><a href="#catalogue" class="anchor"></a>Catalogue</h2><p>The current set of tool definitions shipped with the library:</p><p>‚Ä¢ <a href="Get_contents/index.html"><code>Get_contents</code></a> ‚Äì read a file from the local filesystem ‚Ä¢ <a href="Odoc_search/index.html"><code>Odoc_search</code></a> ‚Äì search locally-indexed odoc docs ‚Ä¢ <a href="Fork/index.html"><code>Fork</code></a> ‚Äì spawn a nested agent performing a task ‚Ä¢ <a href="Webpage_to_markdown/index.html"><code>Webpage_to_markdown</code></a> ‚Äì download an URL and convert to Markdown ‚Ä¢ <a href="Add_line_numbers/index.html"><code>Add_line_numbers</code></a> ‚Äì prefix lines of text with numbers ‚Ä¢ <a href="Get_url_content/index.html"><code>Get_url_content</code></a> ‚Äì fetch raw contents of an URL ‚Ä¢ <a href="Index_ocaml_code/index.html"><code>Index_ocaml_code</code></a> ‚Äì embed OCaml sources into a vector store ‚Ä¢ <a href="Query_vector_db/index.html"><code>Query_vector_db</code></a> ‚Äì semantic search in a vector database ‚Ä¢ <a href="Apply_patch/index.html"><code>Apply_patch</code></a> ‚Äì apply a V4A diff/patch to the workspace ‚Ä¢ <a href="Read_directory/index.html"><code>Read_directory</code></a> ‚Äì list entries of a directory ‚Ä¢ <a href="Append_to_file/index.html"><code>Append_to_file</code></a> ‚Äì append a string to an existing file ‚Ä¢ <a href="Find_and_replace/index.html"><code>Find_and_replace</code></a> ‚Äì find and replace a substring in a file ‚Ä¢ <a href="Meta_refine/index.html"><code>Meta_refine</code></a> ‚Äì refine prompts via Recursive Meta-Prompting ‚Ä¢ <a href="Index_markdown_docs/index.html"><code>Index_markdown_docs</code></a> ‚Äì build a vector index from Markdown docs ‚Ä¢ <a href="Markdown_search/index.html"><code>Markdown_search</code></a> ‚Äì semantic search over Markdown indices ‚Ä¢ <a href="Make_dir/index.html"><code>Make_dir</code></a> ‚Äì create a directory on the filesystem</p><div class="odoc-spec"><div class="spec module anchored" id="module-Get_contents"><a href="#module-Get_contents" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Get_contents/index.html">Get_contents</a></span><span> : <a href="../Ochat_function/module-type-Def/index.html">Ochat_function.Def</a> <span class="keyword">with</span> <span><span class="keyword">type</span> <a href="../Ochat_function/module-type-Def/index.html#type-input">input</a> = string * <span>int option</span></span></span></code></div><div class="spec-doc"><p>Declarative description of a tool. The module is never instantiated ‚Äì its values act as a compile-time record.</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Odoc_search"><a href="#module-Odoc_search" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Odoc_search/index.html">Odoc_search</a></span><span> : 
  <a href="../Ochat_function/module-type-Def/index.html">Ochat_function.Def</a>
    <span class="keyword">with</span> <span><span class="keyword">type</span> <a href="../Ochat_function/module-type-Def/index.html#type-input">input</a> = string * <span>int option</span> * <span>string option</span> * string</span></span></code></div><div class="spec-doc"><p>Declarative description of a tool. The module is never instantiated ‚Äì its values act as a compile-time record.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-fork_input"><a href="#type-fork_input" class="anchor"></a><code><span><span class="keyword">type</span> fork_input</span><span> = </span><span>{</span></code><ol><li id="type-fork_input.command" class="def record field anchored"><a href="#type-fork_input.command" class="anchor"></a><code><span>command : string;</span></code></li><li id="type-fork_input.arguments" class="def record field anchored"><a href="#type-fork_input.arguments" class="anchor"></a><code><span>arguments : <span>string list</span>;</span></code></li></ol><code><span>}</span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Fork"><a href="#module-Fork" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Fork/index.html">Fork</a></span><span> : <a href="../Ochat_function/module-type-Def/index.html">Ochat_function.Def</a> <span class="keyword">with</span> <span><span class="keyword">type</span> <a href="../Ochat_function/module-type-Def/index.html#type-input">input</a> = <a href="#type-fork_input">fork_input</a></span></span></code></div><div class="spec-doc"><p>Declarative description of a tool. The module is never instantiated ‚Äì its values act as a compile-time record.</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Webpage_to_markdown"><a href="#module-Webpage_to_markdown" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Webpage_to_markdown/index.html">Webpage_to_markdown</a></span><span> : <a href="../Ochat_function/module-type-Def/index.html">Ochat_function.Def</a> <span class="keyword">with</span> <span><span class="keyword">type</span> <a href="../Ochat_function/module-type-Def/index.html#type-input">input</a> = string</span></span></code></div><div class="spec-doc"><p>Declarative description of a tool. The module is never instantiated ‚Äì its values act as a compile-time record.</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Add_line_numbers"><a href="#module-Add_line_numbers" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Add_line_numbers/index.html">Add_line_numbers</a></span><span> : <a href="../Ochat_function/module-type-Def/index.html">Ochat_function.Def</a> <span class="keyword">with</span> <span><span class="keyword">type</span> <a href="../Ochat_function/module-type-Def/index.html#type-input">input</a> = string</span></span></code></div><div class="spec-doc"><p>Declarative description of a tool. The module is never instantiated ‚Äì its values act as a compile-time record.</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Get_url_content"><a href="#module-Get_url_content" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Get_url_content/index.html">Get_url_content</a></span><span> : <a href="../Ochat_function/module-type-Def/index.html">Ochat_function.Def</a> <span class="keyword">with</span> <span><span class="keyword">type</span> <a href="../Ochat_function/module-type-Def/index.html#type-input">input</a> = string</span></span></code></div><div class="spec-doc"><p>Declarative description of a tool. The module is never instantiated ‚Äì its values act as a compile-time record.</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Index_ocaml_code"><a href="#module-Index_ocaml_code" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Index_ocaml_code/index.html">Index_ocaml_code</a></span><span> : <a href="../Ochat_function/module-type-Def/index.html">Ochat_function.Def</a> <span class="keyword">with</span> <span><span class="keyword">type</span> <a href="../Ochat_function/module-type-Def/index.html#type-input">input</a> = string * string</span></span></code></div><div class="spec-doc"><p>Declarative description of a tool. The module is never instantiated ‚Äì its values act as a compile-time record.</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Query_vector_db"><a href="#module-Query_vector_db" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Query_vector_db/index.html">Query_vector_db</a></span><span> : 
  <a href="../Ochat_function/module-type-Def/index.html">Ochat_function.Def</a> <span class="keyword">with</span> <span><span class="keyword">type</span> <a href="../Ochat_function/module-type-Def/index.html#type-input">input</a> = string * string * int * <span>string option</span></span></span></code></div><div class="spec-doc"><p>Declarative description of a tool. The module is never instantiated ‚Äì its values act as a compile-time record.</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Apply_patch"><a href="#module-Apply_patch" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Apply_patch/index.html">Apply_patch</a></span><span> : <a href="../Ochat_function/module-type-Def/index.html">Ochat_function.Def</a> <span class="keyword">with</span> <span><span class="keyword">type</span> <a href="../Ochat_function/module-type-Def/index.html#type-input">input</a> = string</span></span></code></div><div class="spec-doc"><p>Declarative description of a tool. The module is never instantiated ‚Äì its values act as a compile-time record.</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Read_directory"><a href="#module-Read_directory" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Read_directory/index.html">Read_directory</a></span><span> : <a href="../Ochat_function/module-type-Def/index.html">Ochat_function.Def</a> <span class="keyword">with</span> <span><span class="keyword">type</span> <a href="../Ochat_function/module-type-Def/index.html#type-input">input</a> = string</span></span></code></div><div class="spec-doc"><p>Declarative description of a tool. The module is never instantiated ‚Äì its values act as a compile-time record.</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Append_to_file"><a href="#module-Append_to_file" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Append_to_file/index.html">Append_to_file</a></span><span> : <a href="../Ochat_function/module-type-Def/index.html">Ochat_function.Def</a> <span class="keyword">with</span> <span><span class="keyword">type</span> <a href="../Ochat_function/module-type-Def/index.html#type-input">input</a> = string * string</span></span></code></div><div class="spec-doc"><p>Declarative description of a tool. The module is never instantiated ‚Äì its values act as a compile-time record.</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Find_and_replace"><a href="#module-Find_and_replace" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Find_and_replace/index.html">Find_and_replace</a></span><span> : 
  <a href="../Ochat_function/module-type-Def/index.html">Ochat_function.Def</a> <span class="keyword">with</span> <span><span class="keyword">type</span> <a href="../Ochat_function/module-type-Def/index.html#type-input">input</a> = string * string * string * bool</span></span></code></div><div class="spec-doc"><p>Declarative description of a tool. The module is never instantiated ‚Äì its values act as a compile-time record.</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Make_dir"><a href="#module-Make_dir" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Make_dir/index.html">Make_dir</a></span><span> : <a href="../Ochat_function/module-type-Def/index.html">Ochat_function.Def</a> <span class="keyword">with</span> <span><span class="keyword">type</span> <a href="../Ochat_function/module-type-Def/index.html#type-input">input</a> = string</span></span></code></div><div class="spec-doc"><p>Declarative description of a tool. The module is never instantiated ‚Äì its values act as a compile-time record.</p></div></div><h2 id="meta-prompting-helpers"><a href="#meta-prompting-helpers" class="anchor"></a>Meta-prompting helpers</h2><div class="odoc-spec"><div class="spec module anchored" id="module-Meta_refine"><a href="#module-Meta_refine" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Meta_refine/index.html">Meta_refine</a></span><span> : <a href="../Ochat_function/module-type-Def/index.html">Ochat_function.Def</a> <span class="keyword">with</span> <span><span class="keyword">type</span> <a href="../Ochat_function/module-type-Def/index.html#type-input">input</a> = string * string</span></span></code></div><div class="spec-doc"><p>Declarative description of a tool. The module is never instantiated ‚Äì its values act as a compile-time record.</p></div></div><h2 id="index_markdown_docs"><a href="#index_markdown_docs" class="anchor"></a>Index_markdown_docs</h2><p>Indexes a folder containing Markdown documents into a vector database suitable for semantic search. The 4-tuple carried in <code>input</code> is:</p><p>‚Ä¢ <code>root</code> ‚Äì directory to crawl recursively. ‚Ä¢ <code>index_name</code> ‚Äì logical identifier for the index (e.g. &quot;docs&quot;). ‚Ä¢ <code>description</code> ‚Äì one-line blurb that describes the corpus. ‚Ä¢ <code>vector_db_root</code> ‚Äì optional destination directory for the vector database; defaults to &quot;.md_index&quot; when <code>None</code>.</p><div class="odoc-spec"><div class="spec module anchored" id="module-Index_markdown_docs"><a href="#module-Index_markdown_docs" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Index_markdown_docs/index.html">Index_markdown_docs</a></span><span> : 
  <a href="../Ochat_function/module-type-Def/index.html">Ochat_function.Def</a> <span class="keyword">with</span> <span><span class="keyword">type</span> <a href="../Ochat_function/module-type-Def/index.html#type-input">input</a> = string * string * string * <span>string option</span></span></span></code></div><div class="spec-doc"><p>Declarative description of a tool. The module is never instantiated ‚Äì its values act as a compile-time record.</p></div></div><h2 id="markdown_search"><a href="#markdown_search" class="anchor"></a>Markdown_search</h2><p>Performs a semantic search over one or more Markdown indices. The 4-tuple carried in <code>input</code> is:</p><p>‚Ä¢ <code>query</code> ‚Äì user query. ‚Ä¢ <code>k</code> ‚Äì optional upper bound on the number of hits (defaults to 5 when <code>None</code>). ‚Ä¢ <code>index_name</code> ‚Äì specific index to query or &quot;all&quot;; when <code>None</code> defaults to &quot;all&quot;. ‚Ä¢ <code>vector_db_root</code> ‚Äì root directory housing the indices; defaults to &quot;.md_index&quot; when <code>None</code>.</p><div class="odoc-spec"><div class="spec module anchored" id="module-Markdown_search"><a href="#module-Markdown_search" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Markdown_search/index.html">Markdown_search</a></span><span> : 
  <a href="../Ochat_function/module-type-Def/index.html">Ochat_function.Def</a>
    <span class="keyword">with</span> <span><span class="keyword">type</span> <a href="../Ochat_function/module-type-Def/index.html#type-input">input</a> = string * <span>int option</span> * <span>string option</span> * <span>string option</span></span></span></code></div><div class="spec-doc"><p>Declarative description of a tool. The module is never instantiated ‚Äì its values act as a compile-time record.</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Import_image"><a href="#module-Import_image" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Import_image/index.html">Import_image</a></span><span> : <a href="../Ochat_function/module-type-Def/index.html">Ochat_function.Def</a> <span class="keyword">with</span> <span><span class="keyword">type</span> <a href="../Ochat_function/module-type-Def/index.html#type-input">input</a> = string</span></span></code></div><div class="spec-doc"><p>Declarative description of a tool. The module is never instantiated ‚Äì its values act as a compile-time record.</p></div></div></div></body></html>
