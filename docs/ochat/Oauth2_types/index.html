<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Oauth2_types (ochat.Oauth2_types)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../odoc.support/odoc.css"/><meta name="generator" content="odoc 3.1.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script><script>let base_url = '../../';
let search_urls = ['../db.js','../../sherlodoc.js'];
</script><script src="../../odoc.support/odoc_search.js" defer="defer"></script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">Index</a> &#x00BB; <a href="../index.html">ochat</a> &#x00BB; Oauth2_types</nav><div class="odoc-search"><div class="search-inner"><input class="search-bar" placeholder="ðŸ”Ž Type '/' to search..."/><div class="search-snake"></div><div class="search-result"></div></div></div><header class="odoc-preamble"><h1>Module <code><span>Oauth2_types</span></code></h1><p>OAuth&amp;nbsp;2.0 â€“ lightweight value types.</p><p>This module bundles a few **plain record** representations that are useful when implementing an OAuth&amp;nbsp;2.0 client or server:</p><p>â€¢ <a href="Metadata/index.html"><code>Metadata</code></a> â€“ subset of the *Authorization Server Metadata* document defined in <a href="https://www.rfc-editor.org/rfc/rfc8414">RFC&amp;nbsp;8414</a>.</p><p>â€¢ <a href="Client_registration/index.html"><code>Client_registration</code></a> â€“ fields returned by a *Dynamic Client Registration* response (<a href="https://www.rfc-editor.org/rfc/rfc7591">RFC&amp;nbsp;7591</a>).</p><p>â€¢ <a href="Token/index.html"><code>Token</code></a> â€“ access-token payload issued by the authorisation server.</p><p>All records derive JSON serialisers via `ppx_jsonaf_conv`, so you can convert them to / from <a href="../Jsonaf_ext/index.html#type-t"><code>Jsonaf.t</code></a> using the automatically generated functions `<code>jsonaf_of_t, t_of_jsonaf</code>`.</p></header><div class="odoc-tocs"><nav class="odoc-toc odoc-local-toc"><ul><li><a href="#example">Example</a></li></ul></nav></div><div class="odoc-content"><h2 id="example"><a href="#example" class="anchor"></a>Example</h2><p>Decoding a token response received from the server:</p><pre class="language-ocaml"><code>  let json =
    {|{
        &quot;access_token&quot;: &quot;abc123&quot;,
        &quot;token_type&quot;  : &quot;Bearer&quot;,
        &quot;expires_in&quot;  : 3600,
        &quot;scope&quot;       : &quot;profile openid&quot;,
        &quot;obtained_at&quot; : 0.0
      }|}
  in
  let token =
    Jsonaf.of_string_exn json |&gt; Oauth2_types.Token.t_of_jsonaf
  in
  assert (not (Oauth2_types.Token.is_expired token))</code></pre><p>The helper function <a href="Token/index.html#val-is_expired"><code>Token.is_expired</code></a> gives a 60-second safety margin so that callers can refresh the token *before* it actually times out.</p><div class="odoc-spec"><div class="spec module anchored" id="module-Jsonaf"><a href="#module-Jsonaf" class="anchor"></a><code><span><span class="keyword">module</span> Jsonaf</span><span> = <a href="../Jsonaf_ext/index.html">Jsonaf_ext</a></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Metadata"><a href="#module-Metadata" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Metadata/index.html">Metadata</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Client_registration"><a href="#module-Client_registration" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Client_registration/index.html">Client_registration</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Token"><a href="#module-Token" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Token/index.html">Token</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div></div></body></html>
