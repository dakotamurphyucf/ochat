<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Highlight_registry (ochat.Chat_tui.Highlight_registry)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 3.1.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script><script>let base_url = '../../../';
let search_urls = ['../../db.js','../../../sherlodoc.js'];
</script><script src="../../../odoc.support/odoc_search.js" defer="defer"></script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../../index.html">Index</a> &#x00BB; <a href="../../index.html">ochat</a> &#x00BB; <a href="../index.html">Chat_tui</a> &#x00BB; Highlight_registry</nav><div class="odoc-search"><div class="search-inner"><input class="search-bar" placeholder="ðŸ”Ž Type '/' to search..."/><div class="search-snake"></div><div class="search-result"></div></div></div><header class="odoc-preamble"><h1>Module <code><span>Chat_tui.Highlight_registry</span></code></h1><p>Process-wide registry of built-in TextMate grammars.</p><p><code>Chat_tui.Highlight_registry</code> exposes a singleton <a href="../Highlight_tm_loader/index.html#type-registry"><code>Highlight_tm_loader.registry</code></a> that is lazily constructed and reused across the UI. The registry is populated with the curated grammars from <a href="../Highlight_grammars/index.html"><code>Highlight_grammars</code></a> (OCaml, Dune, OPAM, shell scripts, diffs, JSON, HTML, Markdown, and the internal <code>ochat-apply-patch</code> format).</p><p>Typical usage is to obtain the registry via <a href="#val-get"><code>get</code></a> and attach it to a <a href="../Highlight_tm_engine/index.html#type-t"><code>Highlight_tm_engine.t</code></a> with <a href="../Highlight_tm_engine/index.html#val-with_registry"><code>Highlight_tm_engine.with_registry</code></a>. For custom sets of grammars, build your own registry via <a href="../Highlight_tm_loader/index.html#val-create_registry"><code>Highlight_tm_loader.create_registry</code></a> and call the <code>Highlight_grammars.add_*</code> helpers directly.</p></header><div class="odoc-content"><div class="odoc-spec"><div class="spec value anchored" id="val-get"><a href="#val-get" class="anchor"></a><code><span><span class="keyword">val</span> get : <span>unit <span class="arrow">&#45;&gt;</span></span> <a href="../Highlight_tm_loader/index.html#type-registry">Highlight_tm_loader.registry</a></span></code></div><div class="spec-doc"><p><code>get ()</code> returns the shared registry pre-populated with the built-in grammars used by the TUI.</p><p>The first call constructs a fresh registry, installs the curated grammars from <a href="../Highlight_grammars/index.html"><code>Highlight_grammars</code></a>, and logs any load failures to standard output using <code>Core.printf</code>. Subsequent calls return the same value.</p><p>The returned registry is shared by all callers. It is safe to add extra grammars to it using <a href="../Highlight_tm_loader/index.html#val-add_grammar_jsonaf"><code>Highlight_tm_loader.add_grammar_jsonaf</code></a> or <a href="../Highlight_tm_loader/index.html#val-add_grammar_jsonaf_file"><code>Highlight_tm_loader.add_grammar_jsonaf_file</code></a>, but there is no support for removing grammars once installed.</p></div></div></div></body></html>
