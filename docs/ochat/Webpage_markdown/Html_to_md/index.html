<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Html_to_md (ochat.Webpage_markdown.Html_to_md)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 3.1.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script><script>let base_url = '../../../';
let search_urls = ['../../db.js','../../../sherlodoc.js'];
</script><script src="../../../odoc.support/odoc_search.js" defer="defer"></script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> ‚Äì <a href="../../../index.html">Index</a> &#x00BB; <a href="../../index.html">ochat</a> &#x00BB; <a href="../index.html">Webpage_markdown</a> &#x00BB; Html_to_md</nav><div class="odoc-search"><div class="search-inner"><input class="search-bar" placeholder="üîé Type '/' to search..."/><div class="search-snake"></div><div class="search-result"></div></div></div><header class="odoc-preamble"><h1>Module <code><span>Webpage_markdown.Html_to_md</span></code></h1><p>HTML ‚Üí Markdown conversion.</p><p>This module transforms a parsed HTML <code>Soup.soup</code> tree into OMD‚Äôs Markdown AST. The conversion is conservative: every node that cannot be mapped to a Markdown construct is re-emitted as a raw HTML block so that no information is silently lost.</p></header><div class="odoc-tocs"><nav class="odoc-toc odoc-local-toc"><ul><li><a href="#pipeline">Pipeline</a></li></ul></nav></div><div class="odoc-content"><h2 id="pipeline"><a href="#pipeline" class="anchor"></a>Pipeline</h2><p>‚Ä¢ Strip obvious ‚Äúchrome‚Äù elements such as navigation bars, scripts or style sheets.<b>r</b> ‚Ä¢ If the document contains a GitHub/GitLab‚Äêstyle <code>`&lt;article class=&quot;markdown-body&quot;&gt;`</code> element, keep only that subtree.<b>r</b> ‚Ä¢ Walk the remaining DOM depth-first and translate each tag to the corresponding OMD block or inline constructor.<b>r</b> ‚Ä¢ Return the fully populated <code>Omd.doc</code> value.</p><p>The public surface area is intentionally minimal ‚Äì helpers live in the implementation file as they do not need to be reused.</p><div class="odoc-spec"><div class="spec value anchored" id="val-convert"><a href="#val-convert" class="anchor"></a><code><span><span class="keyword">val</span> convert : <span><span><span class="xref-unresolved">Soup</span>.soup <span class="xref-unresolved">Soup</span>.node</span> <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Omd</span>.doc</span></code></div><div class="spec-doc"><p><code>convert soup</code> traverses <code>soup</code> and returns a Markdown <code>Omd.doc</code>.</p><p>The traversal is linear in the number of DOM nodes. Unsupported or malformed fragments are preserved inside <code>`Html_block`</code> nodes.</p><p>Example converting a small snippet:</p><pre class="language-ocaml"><code>  let html = &quot;&lt;p&gt;&lt;em&gt;Hi&lt;/em&gt; &lt;strong&gt;there&lt;/strong&gt;&lt;/p&gt;&quot; in
  let soup = Soup.parse html in
  let md   = Html_to_md.convert soup in
  Md_render.to_string md = &quot;*Hi* **there**&quot;</code></pre></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-to_markdown_string"><a href="#val-to_markdown_string" class="anchor"></a><code><span><span class="keyword">val</span> to_markdown_string : <span><span><span class="xref-unresolved">Soup</span>.soup <span class="xref-unresolved">Soup</span>.node</span> <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p><code>to_markdown_string soup</code> is <code>convert soup</code> followed by <a href="../Md_render/index.html#val-to_string"><code>Md_render.to_string</code></a>. It returns the Markdown as a raw <code>string</code>.</p><p>The function never raises. If the input cannot be parsed the original HTML is wrapped in a fenced <code>```html</code> block.</p><p>Example:</p><pre class="language-ocaml"><code>  let md = Html_to_md.to_markdown_string (Soup.parse &quot;&lt;h1&gt;Title&lt;/h1&gt;&quot;) in
  (* md = &quot;# Title&quot; *)</code></pre></div></div></div></body></html>
