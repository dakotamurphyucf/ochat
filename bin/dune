(executable
 (package chatgpt)
 (public_name gpt)
 (name main)
 (modules main)
 (libraries
  lwt_eio
  io
  dune_describe
  omd
  ocaml_parser
  lambdasoup
  vector_db
  doc
  core
  core_unix.command_unix
  openai
  tikitoken
  indexer
  github
  template
  gpt_function
  chat_completion
  chat_response
  apply_patch
  nottui)
 (preprocess
  (pps ppx_jane)))

(executable
 (public_name key-dump)
 (name key_dump)
 (modules key_dump)
 (libraries core eio_main chatgpt.notty_eio))

(executable
 (public_name chat-tui)
 (name chat_tui)
 (modules chat_tui)
 (libraries
  core
  eio_main
  notty.unix
  chatgpt.notty_eio
  chatgpt.notty_scroll_box
  chat_response
  io
  openai
  core_unix.command_unix
  chatgpt.chat_tui)
 (preprocess
  (pps ppx_jane)))

(executable
 (public_name dsl_script)
 (name dsl_script)
 (modules dsl_script)
 (libraries
  menhirLib
  chatml
  chatml_builtin_modules
  chatml_typechecker
  chatml_resolver
  core)
 (preprocess
  (pps ppx_jane)))

(executable
 (public_name terminal_render)
 (name terminal_render)
 (modules terminal_render)
 (libraries notty notty.unix bimage bimage-unix))

(executables
 (names piaf_example eio_get)
 (libraries
  piaf
  core
  logs
  bimage
  roof_schedule_engine
  roof_schedule_printer
  bimage-unix
  notty
  notty.unix
  logs.fmt
  fmt.tty
  astring
  eio_main
  jsonaf
  logs.threaded))

;; ---------------------------------------------------------------------------
;; MCP stdio server executable (Phase-1)
;; ---------------------------------------------------------------------------

(executable
 (public_name mcp_server)
 (name mcp_server)
 (modules mcp_server)
 (libraries
  core
  eio_main
  chatgpt.mcp_types
  chatgpt.mcp_server_core
  chatgpt.mcp_server_router
  jsonaf_ext
  definitions
  functions
  chatgpt.mcp_prompt_agent
  chatgpt.mcp_server_http
  chatgpt.chat_response
  chatgpt.chatmd))
