(version 2)

(build
 (all_platforms ((action (run pkg-config --print-errors --exists libpcre)))))

(depends
 (all_platforms (conf-pkg-config)))

(depexts
 ((libpcre3-dev)
  (= %{os_family} debian))
 ((libpcre3-dev)
  (= %{os_family} ubuntu))
 ((libpcre-devel)
  (= %{os_distribution} mageia))
 ((pcre-devel)
  (= %{os_distribution} centos))
 ((pcre-devel)
  (= %{os_family} fedora))
 ((pcre-devel)
  (= %{os_distribution} rhel))
 ((pcre-devel)
  (= %{os_distribution} ol))
 ((pcre-dev)
  (= %{os_distribution} alpine))
 ((pcre-devel)
  (or_absorb_undefined_var
   (= %{os_family} suse)
   (= %{os_family} opensuse)))
 ((pcre)
  (= %{os_family} arch))
 ((pcre)
  (= %{os} freebsd))
 ((pcre)
  (and_absorb_undefined_var
   (= %{os} macos)
   (= %{os_distribution} homebrew)))
 ((pcre)
  (and_absorb_undefined_var
   (= %{os} macos)
   (= %{os_distribution} macports)))
 ((pcre)
  (and_absorb_undefined_var
   (= %{os} win32)
   (= %{os_distribution} cygwinports))))
